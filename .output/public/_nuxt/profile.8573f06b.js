import{E as k}from"./el-input.bfedf24f.js";import{E as C}from"./el-button.6d2acc68.js";import{_ as x}from"./nuxt-link.88c04702.js";import{_ as N}from"./CommonSettings.706b76a7.js";import{f as U,g as S,r as c,h as B,i as I,o as L,c as P,a as l,t as s,b as n,j as o,k as v,w as h,d as g,E as y}from"./entry.c4882665.js";import{u as T}from"./useAuth.62f7011a.js";import{u as j}from"./useTitle.8c50556b.js";import"./el-text.648a3db6.js";import"./el-switch.9252bc03.js";import"./el-popper.1619c701.js";import"./focus-trap.3aa316d9.js";import"./scroll.b1ce4411.js";import"./isEqual.9bd5e6d1.js";import"./_Uint8Array.6e0e636f.js";import"./client-only.a2de0e08.js";const A={class:"flex-col w-full max-w-prose p-4 m-auto",style:{height:"calc(100vh - 56px)"}},D={class:"flex gap-2"},M=l("h3",null,"Permission Level",-1),le=U({__name:"profile",setup(R){const w=S().t,{email:u,username:m,authlvl:p,changeUsername:V}=T(),r=c(!1),d=c(!1),i=c(m.value),$=async()=>{d.value=!0;try{const e=await V(i.value);r.value=!e,e&&(i.value=m.value)}finally{d.value=!1}};return B(i,e=>{r.value=e!==m.value}),j(`${w("auth.profile")} - ${I("appName").value}`),(e,t)=>{const f=k,_=C,E=x,b=N;return L(),P("div",A,[l("h1",null,s(e.$t("auth.title")),1),l("h3",null,s(e.$t("auth.username")),1),l("div",D,[n(f,{modelValue:o(i),"onUpdate:modelValue":t[0]||(t[0]=a=>v(i)?i.value=a:null),type:"text",formatter:a=>a.replace(/[^\w]+/g,""),parser:a=>a.replace(/[^\w]+/g,"")},null,8,["modelValue","formatter","parser"]),n(_,{type:o(r)?"primary":"",disabled:!o(r),loading:o(d),onClick:t[1]||(t[1]=a=>$())},{default:h(()=>[g(s(e.$t("action.save")),1)]),_:1},8,["type","disabled","loading"])]),l("h3",null,s(e.$t("auth.passwd")),1),n(E,{href:"/acc/reset-password"},{default:h(()=>[n(_,null,{default:h(()=>[g(s(e.$t("auth.resetPw")),1)]),_:1})]),_:1}),l("h3",null,s(e.$t("auth.email")),1),l("div",{class:"opacity-60",onClick:t[3]||(t[3]=()=>o(y).info("Email address cannot be changed."))},[n(f,{modelValue:o(u),"onUpdate:modelValue":t[2]||(t[2]=a=>v(u)?u.value=a:null),type:"email",disabled:"",class:"pointer-events-none"},null,8,["modelValue"])]),M,l("div",{class:"opacity-60",onClick:t[5]||(t[5]=()=>o(y).info("Please contact the administrator to change the permission level."))},[n(f,{modelValue:o(p),"onUpdate:modelValue":t[4]||(t[4]=a=>v(p)?p.value=a:null),type:"text",disabled:"",class:"pointer-events-none"},null,8,["modelValue"])]),l("h1",null,s(e.$t("settings.appearance")),1),n(b)])}}});export{le as default};
