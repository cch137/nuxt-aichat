import{E as B,a as D}from"./el-select.6dbd7617.js";import{E as z}from"./el-input.56ada267.js";import{E as P}from"./el-button.884526f4.js";import{f as q,r as d,h as F,af as I,g as L,i as M,o as v,c as g,a as o,t as N,b as y,w as h,F as $,C as b,j as i,k as x,aQ as j,m as S}from"./entry.e6cf1318.js";import"./el-popper.37d83a1f.js";import{u as K}from"./useTitle.4874de80.js";import"./scroll.ee5f789a.js";import"./isEqual.7441ced1.js";import"./_Uint8Array.ddd8c7c7.js";import"./focus-trap.503aa364.js";const O={class:"mt-8 flex-col gap-4 flex-center"},W={class:"px-4 w-full max-w-prose flex flex-col gap-4 justify-center"},Y={class:"flex gap-4"},A={class:"flex-1 flex-center"},Q={class:"flex gap-4"},G={class:"flex-1 flex-center"},H={class:"flex-center"},J={class:"qrcode-canvas-outter flex-center flex-wrap p-4 w-full"},X={ref:"qrcodeCanvas",id:"qrcode-canvas"},ie=q({__name:"currency-converter",setup(Z){const V=d([]),r=d("TWD"),s=d("MYR"),u=d(""),c=d("");async function k(l,e){var n;return l===e?1:((n=await(await fetch(`https://api.cch137.link/currency?from=${l}&to=${e}`)).json())==null?void 0:n.rate)||0}const C=(()=>{let l="",e="",a=0,f;return async()=>{const n=r.value,p=s.value;if(a<Date.now()||l!==n||e!==p){f=k(n,p),l=n,e=p;{const t=new URLSearchParams(location.search);t.set("from",n),t.set("to",p),history.replaceState(0,"",`${location.pathname}?${t.toString()}`)}a=Date.now()+5*60*1e3}return await f||1}})();function _(l,e=!0){const a=Math.round(l*100)/100;return e&&a%1===0?`${a}.00`:!e&&!a?"":a}async function m(l=!1){c.value=_(u.value*await C()),l&&(u.value=_(u.value,!1))}async function w(l=!1){l&&(c.value=_(c.value)),u.value=_(c.value/await C(),!1)}function E(){try{document.querySelector(".FxFromValueInput input").focus()}catch{}}function R(){const l=r.value;r.value=s.value,s.value=l}{F(r,()=>m()),F(s,()=>m());const l=new URLSearchParams(location.search),e=l.get("from")||"TWD",a=l.get("to")||"MYR";r.value=e,s.value=a,m(),I(E)}const T=L().t,U=M("appName").value;return K(`${T("page.currencyCvt")} - ${U}`),(l,e)=>{const a=D,f=B,n=z,p=P;return v(),g("div",O,[o("h1",null,N(l.$t("page.currencyCvt")),1),o("div",W,[o("div",Y,[y(f,{modelValue:i(r),"onUpdate:modelValue":e[0]||(e[0]=t=>x(r)?r.value=t:null),class:"currency-select",size:"large"},{default:h(()=>[(v(!0),g($,null,b(i(V),t=>(v(),S(a,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o("div",A,[y(n,{modelValue:i(u),"onUpdate:modelValue":e[1]||(e[1]=t=>x(u)?u.value=t:null),type:"number",size:"large",class:"FxFromValueInput currency-input",onKeyup:e[2]||(e[2]=t=>m()),onChange:e[3]||(e[3]=t=>m(!0))},null,8,["modelValue"])])]),o("div",Q,[y(f,{modelValue:i(s),"onUpdate:modelValue":e[4]||(e[4]=t=>x(s)?s.value=t:null),class:"currency-select",size:"large"},{default:h(()=>[(v(!0),g($,null,b(i(V),t=>(v(),S(a,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o("div",G,[y(n,{modelValue:i(c),"onUpdate:modelValue":e[5]||(e[5]=t=>x(c)?c.value=t:null),type:"number",size:"large",class:"FxFromValueOutput currency-input",onKeyup:e[6]||(e[6]=t=>w()),onChange:e[7]||(e[7]=t=>w(!0))},null,8,["modelValue"])])]),o("div",H,[y(p,{class:"SwitchCurrenciesButton",onClick:e[8]||(e[8]=t=>R()),icon:i(j),size:"large"},null,8,["icon"])])]),o("div",J,[o("canvas",X,null,512)])])}}});export{ie as default};
