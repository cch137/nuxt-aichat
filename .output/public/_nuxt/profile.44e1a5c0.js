import{E}from"./el-input.25c15878.js";import{E as b}from"./el-button.9d18c5bb.js";import{_ as k}from"./nuxt-link.9c6fe5f7.js";import{_ as C}from"./CommonSettings.af9747b3.js";import{f as N,g as x,r as d,h as S,i as U,o as B,c as I,a as o,t as s,b as n,j as r,k as _,w as c,d as h,E as L}from"./entry.88572d02.js";import{u as T}from"./useAuth.10008d4c.js";import{u as j}from"./useTitle.5cbcd1cb.js";import"./use-form-item.a8b72851.js";import"./el-text.cfa4ecd2.js";import"./el-switch.0b0cba1f.js";import"./el-popper.db3dc3d6.js";import"./focus-trap.368b9f41.js";import"./scroll.c07ad049.js";import"./isEqual.ca6882cc.js";import"./_Uint8Array.fb065b8d.js";import"./client-only.fc780b7c.js";import"./useChat.20039da4.js";import"./el-overlay.170f873b.js";const A={class:"flex-col w-full max-w-prose p-4 m-auto",style:{height:"calc(100vh - 56px)"}},D={class:"flex gap-2"},se=N({__name:"profile",setup(M){const g=x().t,{email:i,username:m,changeUsername:w}=T(),u=d(!1),p=d(!1),l=d(m.value),y=async()=>{p.value=!0;try{const e=await w(l.value);u.value=!e,e&&(l.value=m.value)}finally{p.value=!1}};return S(l,e=>{u.value=e!==m.value}),j(`${g("auth.profile")} - ${U("appName").value}`),(e,t)=>{const f=E,v=b,$=k,V=C;return B(),I("div",A,[o("h1",null,s(e.$t("auth.title")),1),o("h3",null,s(e.$t("auth.username")),1),o("div",D,[n(f,{modelValue:r(l),"onUpdate:modelValue":t[0]||(t[0]=a=>_(l)?l.value=a:null),type:"text",formatter:a=>a.replace(/[^\w]+/g,""),parser:a=>a.replace(/[^\w]+/g,"")},null,8,["modelValue","formatter","parser"]),n(v,{type:r(u)?"primary":"",disabled:!r(u),loading:r(p),onClick:t[1]||(t[1]=a=>y())},{default:c(()=>[h(s(e.$t("action.save")),1)]),_:1},8,["type","disabled","loading"])]),o("h3",null,s(e.$t("auth.passwd")),1),n($,{href:"/acc/reset-password"},{default:c(()=>[n(v,null,{default:c(()=>[h(s(e.$t("auth.resetPw")),1)]),_:1})]),_:1}),o("h3",null,s(e.$t("auth.email")),1),o("div",{class:"opacity-60",onClick:t[3]||(t[3]=()=>r(L).info("Email address cannot be changed."))},[n(f,{modelValue:r(i),"onUpdate:modelValue":t[2]||(t[2]=a=>_(i)?i.value=a:null),type:"email",disabled:"",class:"pointer-events-none"},null,8,["modelValue"])]),o("h1",null,s(e.$t("settings.appearance")),1),n(V)])}}});export{se as default};
