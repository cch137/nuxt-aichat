import{E as b,a as C,b as V}from"./el-switch.39504591.js";import{f as k,r as c,E as i,i as w,o as d,c as h,a as u,t as y,j as t,b as g,k as f,w as $,F as x,C as D,m as O}from"./entry.8cc09dfa.js";import"./el-input.c634915e.js";import"./el-popper.ab274340.js";import{u as T}from"./useTitle.91169fe5.js";import"./use-form-item.da8f5c2a.js";import"./scroll.4ca58c5d.js";import"./isEqual.2ad48a2b.js";import"./_Uint8Array.e5330a46.js";import"./focus-trap.e2a2c229.js";const N={class:"flex-col flex-center gap-2"},F=u("h2",null,"Discord Bot",-1),A=u("h2",null,"Search Engine",-1),J=k({__name:"dashboard",setup(G){const l=c(!1),a=c(!1);async function v(){l.value=!0,await $fetch("/api/admin/setting",{method:"POST",body:{name:"dcBot",value:a.value}}),m()}async function m(){l.value=!0,a.value=(await $fetch("/api/discord",{method:"GET"})).connected,l.value=!1}m();const o=c("google"),_=c(["google","duckduckgo","all"]);$fetch("/api/admin/search-engine",{method:"GET"}).then(s=>{const{error:e,value:r}=s;if(e)throw e;o.value=r}).catch(()=>{i.error("Fetching search engine failed."),o.value=""});function E(s){$fetch("/api/admin/search-engine",{method:"POST",body:{value:s}}).then(()=>i.success("Search engine has been changed.")).catch(()=>i.error("Search engine change failed."))}const p=w("appName").value;return T(`Admin - ${p}`),(s,e)=>{const r=b,B=V,S=C;return d(),h("div",N,[u("h1",null,"Admin Dashboard | "+y(t(p)),1),F,g(r,{modelValue:t(a),"onUpdate:modelValue":e[0]||(e[0]=n=>f(a)?a.value=n:null),onChange:e[1]||(e[1]=n=>v()),loading:t(l),size:"large"},null,8,["modelValue","loading"]),A,g(S,{modelValue:t(o),"onUpdate:modelValue":e[2]||(e[2]=n=>f(o)?o.value=n:null),placeholder:"Select",onChange:e[3]||(e[3]=n=>E(n))},{default:$(()=>[(d(!0),h(x,null,D(t(_),n=>(d(),O(B,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])}}});export{J as default};
