import{r as l,h as m,aE as S,E as i}from"./entry.97b597df.js";function y(){let o;const c=l(!1),s=l(""),h="m",u=m({dcBotConnected:!1});function g(){o.value.k=s.value}function r(a={}){return g(),{passwd:s.value,...a}}function d(a){for(const n in a)u[n]=a[n]}async function p(){const a=await $fetch("/api/admin/check",{method:"POST",body:r()});a?(c.value=!0,d(a),i.success("Logged in"),await f()):(c.value=!1,i.error("Password incorrect"))}async function v(a,n,e){e&&(e[a]=!0),d(await $fetch("/api/admin/setting",{method:"POST",body:r({name:a,value:n})})),console.log(e),e&&(e[a]=!1)}const t=m([]);async function f(){const a=await $fetch("/api/admin/data/curva-record",{method:"POST",body:r()});if(!a){i.error("Curva usage record update failed");return}t.splice(0,t.length),t.push(...a)}return o=S(h,{}),s.value=o.value.k||"",{haveAccess:c,adminPassword:s,adminSettings:u,checkAdminLogin:p,changeSetting:v,curvaUsageList:t,updateCurvaUsageList:f}}export{y as u};
