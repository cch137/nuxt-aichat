import{E as D,a as z}from"./el-select.954ebc2f.js";import{E as P}from"./el-input.ab299bad.js";import{E as j}from"./el-button.a8e0030a.js";import{f as q,r as v,h,af as I,g as L,i as M,o as d,c as V,a as o,t as N,b as y,w as F,F as $,C as b,j as i,k as x,aQ as A,m as k}from"./entry.63e3d975.js";import"./el-popper.c5789543.js";import{u as K}from"./useTitle.4c77be40.js";import"./scroll.5d78e550.js";import"./isEqual.b83645fa.js";import"./_Uint8Array.3cf918ab.js";import"./focus-trap.cb0f1b89.js";const O={class:"mt-8 flex-col gap-4 flex-center"},W={class:"px-4 w-full max-w-prose flex flex-col gap-4 justify-center"},Y={class:"flex gap-4"},Q={class:"flex-1 flex-center"},G={class:"flex gap-4"},H={class:"flex-1 flex-center"},J={class:"flex-center"},X={class:"qrcode-canvas-outter flex-center flex-wrap p-4 w-full"},Z={ref:"qrcodeCanvas",id:"qrcode-canvas"},fe=q({__name:"currency-converter",setup(ee){const g=v([]),s=v("TWD"),r=v("MYR"),u=v(""),c=v("");async function S(a,e){var l;return a===e?1:((l=await(await fetch(`https://api.cch137.link/currency?from=${a}&to=${e}`)).json())==null?void 0:l.rate)||0}const w=(()=>{let a="",e="",n=0,f;return async()=>{const l=s.value,p=r.value;if(n<Date.now()||a!==l||e!==p){f=S(l,p),a=l,e=p;{const t=new URLSearchParams(location.search);t.set("from",l),t.set("to",p),history.replaceState(0,"",`${location.pathname}?${t.toString()}`)}n=Date.now()+5*60*1e3}return await f||1}})();function _(a,e=!0){const n=Math.round(a*100)/100;return e&&n%1===0?`${n}.00`:!e&&!n?"":n}async function m(a=!1){c.value=_(u.value*await w()),a&&(u.value=_(u.value,!1))}async function C(a=!1){a&&(c.value=_(c.value)),u.value=_(c.value/await w(),!1)}function E(){try{document.querySelector(".FxFromValueInput input").focus()}catch{}}function R(){const a=s.value;s.value=r.value,r.value=a}async function T(){const a=await fetch("https://api.cch137.link/currency-list");g.value=await a.json()}{h(s,()=>m()),h(r,()=>m());const a=new URLSearchParams(location.search),e=a.get("from")||"TWD",n=a.get("to")||"MYR";s.value=e,r.value=n,T(),m(),I(E)}const U=L().t,B=M("appName").value;return K(`${U("page.currencyCvt")} - ${B}`),(a,e)=>{const n=z,f=D,l=P,p=j;return d(),V("div",O,[o("h1",null,N(a.$t("page.currencyCvt")),1),o("div",W,[o("div",Y,[y(f,{modelValue:i(s),"onUpdate:modelValue":e[0]||(e[0]=t=>x(s)?s.value=t:null),class:"currency-select",size:"large"},{default:F(()=>[(d(!0),V($,null,b(i(g),t=>(d(),k(n,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o("div",Q,[y(l,{modelValue:i(u),"onUpdate:modelValue":e[1]||(e[1]=t=>x(u)?u.value=t:null),type:"number",size:"large",class:"FxFromValueInput currency-input",onKeyup:e[2]||(e[2]=t=>m()),onChange:e[3]||(e[3]=t=>m(!0))},null,8,["modelValue"])])]),o("div",G,[y(f,{modelValue:i(r),"onUpdate:modelValue":e[4]||(e[4]=t=>x(r)?r.value=t:null),class:"currency-select",size:"large"},{default:F(()=>[(d(!0),V($,null,b(i(g),t=>(d(),k(n,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o("div",H,[y(l,{modelValue:i(c),"onUpdate:modelValue":e[5]||(e[5]=t=>x(c)?c.value=t:null),type:"number",size:"large",class:"FxFromValueOutput currency-input",onKeyup:e[6]||(e[6]=t=>C()),onChange:e[7]||(e[7]=t=>C(!0))},null,8,["modelValue"])])]),o("div",J,[y(p,{class:"SwitchCurrenciesButton",onClick:e[8]||(e[8]=t=>R()),icon:i(A),size:"large"},null,8,["icon"])])]),o("div",X,[o("canvas",Z,null,512)])])}}});export{fe as default};
