var be=Object.defineProperty;var Ae=(t,e,o)=>e in t?be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var it=(t,e,o)=>(Ae(t,typeof e!="symbol"?e+"":e,o),o);import{Q as Et,ci as Te,cj as Ee,ck as He,cl as ke,cm as J,r as z,h as tt,W as Re,E as N,i as zt,cn as $e,g as Ie,v as dt,aD as We,co as Ct,s as gt,m as Xt,cp as qe}from"./entry.9e0d5745.js";import{E as pt}from"./el-overlay.69ea380b.js";import"./el-button.37e5292e.js";import"./el-input.56f3fa48.js";import{u as Ot}from"./useTitle.56a5e2e0.js";import{l as Pe,s as Ht}from"./str.d457f5f4.js";var De=Te,Ne=Ee,ze=He,Oe={formats:ze,parse:Ne,stringify:De};const Vt=Et(Oe);async function V(t=0){return await new Promise((e,o)=>{setTimeout(()=>{try{window.scrollTo(0,document.body.scrollHeight),e(null)}catch(n){o(n)}},+t||0)})}const je={get isMobileScreen(){return window.innerWidth<600},get isTouchScreen(){return"ontouchstart"in document||navigator.maxTouchPoints>0}};function jt(){return je}const Mt="web-browsing",Lt="temperature-suffix",yt="temperature",Kt="01",Jt="0123456789",Zt="0123456789abcdef",Yt="0123456789abcdefghijklmnopqrstuvwxyz",te="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bt=t=>{switch(typeof t!="string"&&(t=Pe(t)),t){case"2":return Kt;case"10":return Jt;case"16":return Zt;case"36":return Yt;case"62":return te;case"64":return Z;case"64w":case"64+":return ee;default:return t}},Me=(t,e,o,n=0)=>{typeof t!="string"&&(t=Ht(t));let i=BigInt(0);e=bt(e);const d=e.length;for(let b=0;b<t.length;b++)i+=BigInt(e.indexOf(t[b])*Math.pow(d,t.length-1-b));let y="";if(o=bt(o),y===""){const b=BigInt(o.length);for(;i>0;)y=o.charAt(+BigInt(i%b).toString())+y,i=BigInt(i/b)}return(y===""?o.charAt(0):y).padStart(n,o[0])},Le=t=>{const e=t.split("").map(d=>d.charCodeAt(0)),o=[];let n=0;for(;n<e.length;){const[d,y=0,b=0]=e.slice(n,n+=3),E=(d<<16)+(y<<8)+b,s=E>>18,B=E>>12&63,A=E>>6&63,T=E&63;o.push(Z[s],Z[B],Z[A],Z[T])}const i=e.length%3;return o.join("").slice(0,1+o.length-i)+(i===2?"==":i===1?"=":"")},Fe=/[^A-Za-z0-9+/]/g,re=t=>t.replace(Fe,""),wt=t=>String.fromCharCode(+t),Ue=t=>{const e=re(t).split(""),o=[];let n=0;for(;n<e.length;){const[i,d,y,b]=e.slice(n,n+=4).map(E=>Z.indexOf(E));o.push(wt(i<<2|d>>4)),y!==64&&o.push(wt((d&15)<<4|y>>2)),b!==64&&o.push(wt((y&3)<<6|b))}return o.join("").replaceAll("\0","")},et={BASE2_CHARSET:Kt,BASE10_CHARSET:Jt,BASE16_CHARSET:Zt,BASE36_CHARSET:Yt,BASE62_CHARSET:te,BASE64_CHARSET:Z,BASE64WEB_CHARSET:ee,convert:Me,getCharset:bt,secureBase64:re,textToBase64:Le,base64ToText:Ue};var ne={exports:{}};function Qe(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var _t={exports:{}},Ft;function kt(){return Ft||(Ft=1,function(t,e){(function(o,n){t.exports=n()})(J,function(){var o=o||function(n,i){var d;if(typeof window<"u"&&window.crypto&&(d=window.crypto),typeof self<"u"&&self.crypto&&(d=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(d=globalThis.crypto),!d&&typeof window<"u"&&window.msCrypto&&(d=window.msCrypto),!d&&typeof J<"u"&&J.crypto&&(d=J.crypto),!d&&typeof Qe=="function")try{d=ke}catch{}var y=function(){if(d){if(typeof d.getRandomValues=="function")try{return d.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof d.randomBytes=="function")try{return d.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},b=Object.create||function(){function r(){}return function(h){var v;return r.prototype=h,v=new r,r.prototype=null,v}}(),E={},s=E.lib={},B=s.Base=function(){return{extend:function(r){var h=b(this);return r&&h.mixIn(r),(!h.hasOwnProperty("init")||this.init===h.init)&&(h.init=function(){h.$super.init.apply(this,arguments)}),h.init.prototype=h,h.$super=this,h},create:function(){var r=this.extend();return r.init.apply(r,arguments),r},init:function(){},mixIn:function(r){for(var h in r)r.hasOwnProperty(h)&&(this[h]=r[h]);r.hasOwnProperty("toString")&&(this.toString=r.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),A=s.WordArray=B.extend({init:function(r,h){r=this.words=r||[],h!=i?this.sigBytes=h:this.sigBytes=r.length*4},toString:function(r){return(r||p).stringify(this)},concat:function(r){var h=this.words,v=r.words,g=this.sigBytes,x=r.sigBytes;if(this.clamp(),g%4)for(var _=0;_<x;_++){var k=v[_>>>2]>>>24-_%4*8&255;h[g+_>>>2]|=k<<24-(g+_)%4*8}else for(var C=0;C<x;C+=4)h[g+C>>>2]=v[C>>>2];return this.sigBytes+=x,this},clamp:function(){var r=this.words,h=this.sigBytes;r[h>>>2]&=4294967295<<32-h%4*8,r.length=n.ceil(h/4)},clone:function(){var r=B.clone.call(this);return r.words=this.words.slice(0),r},random:function(r){for(var h=[],v=0;v<r;v+=4)h.push(y());return new A.init(h,r)}}),T=E.enc={},p=T.Hex={stringify:function(r){for(var h=r.words,v=r.sigBytes,g=[],x=0;x<v;x++){var _=h[x>>>2]>>>24-x%4*8&255;g.push((_>>>4).toString(16)),g.push((_&15).toString(16))}return g.join("")},parse:function(r){for(var h=r.length,v=[],g=0;g<h;g+=2)v[g>>>3]|=parseInt(r.substr(g,2),16)<<24-g%8*4;return new A.init(v,h/2)}},S=T.Latin1={stringify:function(r){for(var h=r.words,v=r.sigBytes,g=[],x=0;x<v;x++){var _=h[x>>>2]>>>24-x%4*8&255;g.push(String.fromCharCode(_))}return g.join("")},parse:function(r){for(var h=r.length,v=[],g=0;g<h;g++)v[g>>>2]|=(r.charCodeAt(g)&255)<<24-g%4*8;return new A.init(v,h)}},w=T.Utf8={stringify:function(r){try{return decodeURIComponent(escape(S.stringify(r)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(r){return S.parse(unescape(encodeURIComponent(r)))}},l=s.BufferedBlockAlgorithm=B.extend({reset:function(){this._data=new A.init,this._nDataBytes=0},_append:function(r){typeof r=="string"&&(r=w.parse(r)),this._data.concat(r),this._nDataBytes+=r.sigBytes},_process:function(r){var h,v=this._data,g=v.words,x=v.sigBytes,_=this.blockSize,k=_*4,C=x/k;r?C=n.ceil(C):C=n.max((C|0)-this._minBufferSize,0);var H=C*_,R=n.min(H*4,x);if(H){for(var $=0;$<H;$+=_)this._doProcessBlock(g,$);h=g.splice(0,H),v.sigBytes-=R}return new A.init(h,R)},clone:function(){var r=B.clone.call(this);return r._data=this._data.clone(),r},_minBufferSize:0});s.Hasher=l.extend({cfg:B.extend(),init:function(r){this.cfg=this.cfg.extend(r),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(r){return this._append(r),this._process(),this},finalize:function(r){r&&this._append(r);var h=this._doFinalize();return h},blockSize:16,_createHelper:function(r){return function(h,v){return new r.init(v).finalize(h)}},_createHmacHelper:function(r){return function(h,v){return new m.HMAC.init(r,v).finalize(h)}}});var m=E.algo={};return E}(Math);return o})}(_t)),_t.exports}var xt={exports:{}},Ut;function Ge(){return Ut||(Ut=1,function(t,e){(function(o,n){t.exports=n(kt())})(J,function(o){return function(n){var i=o,d=i.lib,y=d.Base,b=d.WordArray,E=i.x64={};E.Word=y.extend({init:function(s,B){this.high=s,this.low=B}}),E.WordArray=y.extend({init:function(s,B){s=this.words=s||[],B!=n?this.sigBytes=B:this.sigBytes=s.length*8},toX32:function(){for(var s=this.words,B=s.length,A=[],T=0;T<B;T++){var p=s[T];A.push(p.high),A.push(p.low)}return b.create(A,this.sigBytes)},clone:function(){for(var s=y.clone.call(this),B=s.words=this.words.slice(0),A=B.length,T=0;T<A;T++)B[T]=B[T].clone();return s}})}(),o})}(xt)),xt.exports}(function(t,e){(function(o,n,i){t.exports=n(kt(),Ge())})(J,function(o){return function(n){var i=o,d=i.lib,y=d.WordArray,b=d.Hasher,E=i.x64,s=E.Word,B=i.algo,A=[],T=[],p=[];(function(){for(var l=1,m=0,r=0;r<24;r++){A[l+5*m]=(r+1)*(r+2)/2%64;var h=m%5,v=(2*l+3*m)%5;l=h,m=v}for(var l=0;l<5;l++)for(var m=0;m<5;m++)T[l+5*m]=m+(2*l+3*m)%5*5;for(var g=1,x=0;x<24;x++){for(var _=0,k=0,C=0;C<7;C++){if(g&1){var H=(1<<C)-1;H<32?k^=1<<H:_^=1<<H-32}g&128?g=g<<1^113:g<<=1}p[x]=s.create(_,k)}})();var S=[];(function(){for(var l=0;l<25;l++)S[l]=s.create()})();var w=B.SHA3=b.extend({cfg:b.cfg.extend({outputLength:512}),_doReset:function(){for(var l=this._state=[],m=0;m<25;m++)l[m]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(l,m){for(var r=this._state,h=this.blockSize/2,v=0;v<h;v++){var g=l[m+2*v],x=l[m+2*v+1];g=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,x=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360;var _=r[v];_.high^=x,_.low^=g}for(var k=0;k<24;k++){for(var C=0;C<5;C++){for(var H=0,R=0,$=0;$<5;$++){var _=r[C+5*$];H^=_.high,R^=_.low}var O=S[C];O.high=H,O.low=R}for(var C=0;C<5;C++)for(var I=S[(C+4)%5],j=S[(C+1)%5],G=j.high,X=j.low,H=I.high^(G<<1|X>>>31),R=I.low^(X<<1|G>>>31),$=0;$<5;$++){var _=r[C+5*$];_.high^=H,_.low^=R}for(var D=1;D<25;D++){var H,R,_=r[D],M=_.high,L=_.low,a=A[D];a<32?(H=M<<a|L>>>32-a,R=L<<a|M>>>32-a):(H=L<<a-32|M>>>64-a,R=M<<a-32|L>>>64-a);var c=S[T[D]];c.high=H,c.low=R}var u=S[0],f=r[0];u.high=f.high,u.low=f.low;for(var C=0;C<5;C++)for(var $=0;$<5;$++){var D=C+5*$,_=r[D],qt=S[D],Pt=S[(C+1)%5+5*$],Dt=S[(C+2)%5+5*$];_.high=qt.high^~Pt.high&Dt.high,_.low=qt.low^~Pt.low&Dt.low}var _=r[0],Nt=p[k];_.high^=Nt.high,_.low^=Nt.low}},_doFinalize:function(){var l=this._data,m=l.words;this._nDataBytes*8;var r=l.sigBytes*8,h=this.blockSize*32;m[r>>>5]|=1<<24-r%32,m[(n.ceil((r+1)/h)*h>>>5)-1]|=128,l.sigBytes=m.length*4,this._process();for(var v=this._state,g=this.cfg.outputLength/8,x=g/8,_=[],k=0;k<x;k++){var C=v[k],H=C.high,R=C.low;H=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,_.push(R),_.push(H)}return new y.init(_,g)},clone:function(){for(var l=b.clone.call(this),m=l._state=this._state.slice(0),r=0;r<25;r++)m[r]=m[r].clone();return l}});i.SHA3=b._createHelper(w),i.HmacSHA3=b._createHmacHelper(w)}(Math),o.SHA3})})(ne);var Xe=ne.exports;const oe=Et(Xe);function Ve(...t){return t.reduce((e,o)=>e+o,0)}function Ke(t){try{return typeof t[Symbol==null?void 0:Symbol.iterator]=="function"}catch{return!1}}function se(t){const e=new Set;return JSON.stringify(t,(n,i)=>{if(typeof i=="object"&&i!==null){if(e.has(i))return;e.add(i),Ke(i)&&(i=[...i])}return i})}const Je=t=>oe(t,{outputLength:256}).toString(),Ze=/0b[0-1]+/i;function at(t){if(typeof t=="number")return Math.round(t);if(t instanceof Object&&(t=se(t)),typeof t=="string"){if(Ze.test(t))return parseInt(t.substring(2,t.length-1),2);const e=parseInt(t);return Number.isNaN(e)?e:Ve(parseInt(Je(t),16))}else return Date.now()}const q=624,ct=397,Ye=2567483615,St=2147483648,Bt=2147483647;class tr{constructor(e){it(this,"mt",new Array(q));it(this,"mti",q+1);it(this,"seed");return this.seed=e=at(e),Array.isArray(e)?this.init_by_array(e,e.length):this.init_seed(e),this}init_seed(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<q;this.mti++)e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(((e&4294901760)>>>16)*1812433253<<16)+(e&65535)*1812433253+this.mti,this.mt[this.mti]>>>=0}init_by_array(e,o){let n,i,d;for(this.init_seed(19650218),n=1,i=0,d=q>o?q:o;d!==0;d--){const y=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(((y&4294901760)>>>16)*1664525<<16)+(y&65535)*1664525)+e[i]+i,this.mt[n]>>>=0,n++,i++,n>=q&&(this.mt[0]=this.mt[q-1],n=1),i>=o&&(i=0)}for(d=q-1;d!==0;d--){const y=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(((y&4294901760)>>>16)*1566083941<<16)+(y&65535)*1566083941)-n,this.mt[n]>>>=0,n++,n>=q&&(this.mt[0]=this.mt[q-1],n=1)}this.mt[0]=2147483648}random_int(){let e;const o=new Array(0,Ye);if(this.mti>=q){let n;for(this.mti===q+1&&this.init_seed(5489),n=0;n<q-ct;n++)e=this.mt[n]&St|this.mt[n+1]&Bt,this.mt[n]=this.mt[n+ct]^e>>>1^o[e&1];for(;n<q-1;n++)e=this.mt[n]&St|this.mt[n+1]&Bt,this.mt[n]=this.mt[n+(ct-q)]^e>>>1^o[e&1];e=this.mt[q-1]&St|this.mt[0]&Bt,this.mt[q-1]=this.mt[ct-1]^e>>>1^o[e&1],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^=e>>>18,e>>>0}random_int31(){return this.random_int()>>>1}random_incl(){return this.random_int()*(1/4294967295)}random(){return this.random_int()*(1/4294967296)}random_excl(){return(this.random_int()+.5)*(1/4294967296)}random_long(){return((this.random_int()>>>5)*67108864+(this.random_int()>>>6))*(1/9007199254740992)}}function ae(t){return new tr(t)}const{BASE10_CHARSET:er,BASE16_CHARSET:rr,BASE64WEB_CHARSET:nr}=et,or=ae(),ie=(t=or)=>t.random(),Rt=(t,e,o)=>((e===void 0||e===0)&&(e=t,t=0),Math.floor(t+ie(o)*e)),ce=(t,e)=>t[Rt(0,t.length,e)],ue=(t,e=1,o)=>{const n=[],i=[];for(let d=0;d<e;d++)i.length===0&&i.push(...t),n.push(i.splice(Rt(0,i.length,o),1)[0]);return n},sr=(t,e)=>ue(t,t.length,e),ut=(t,e=8,o)=>new Array(e).fill(0).map(n=>ce(t,o)).join(""),fe={MT:ae,toSeed:at,rand:ie,randInt:Rt,charset:ut,choice:ce,choices:ue,shuffle:sr,base10:(t=6,e)=>ut(er,t,e),base16:(t=32,e)=>ut(rr,t,e),base64:(t=32,e)=>ut(nr,t,e),lcg(t){let e=at(t);return()=>(e=(e*1664525+1013904223)%4294967296)/4294967296}};var le={exports:{}};(function(t,e){(function(o,n){t.exports=n(kt())})(J,function(o){return function(n){var i=o,d=i.lib,y=d.WordArray,b=d.Hasher,E=i.algo,s=[];(function(){for(var w=0;w<64;w++)s[w]=n.abs(n.sin(w+1))*4294967296|0})();var B=E.MD5=b.extend({_doReset:function(){this._hash=new y.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(w,l){for(var m=0;m<16;m++){var r=l+m,h=w[r];w[r]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360}var v=this._hash.words,g=w[l+0],x=w[l+1],_=w[l+2],k=w[l+3],C=w[l+4],H=w[l+5],R=w[l+6],$=w[l+7],O=w[l+8],I=w[l+9],j=w[l+10],G=w[l+11],X=w[l+12],D=w[l+13],M=w[l+14],L=w[l+15],a=v[0],c=v[1],u=v[2],f=v[3];a=A(a,c,u,f,g,7,s[0]),f=A(f,a,c,u,x,12,s[1]),u=A(u,f,a,c,_,17,s[2]),c=A(c,u,f,a,k,22,s[3]),a=A(a,c,u,f,C,7,s[4]),f=A(f,a,c,u,H,12,s[5]),u=A(u,f,a,c,R,17,s[6]),c=A(c,u,f,a,$,22,s[7]),a=A(a,c,u,f,O,7,s[8]),f=A(f,a,c,u,I,12,s[9]),u=A(u,f,a,c,j,17,s[10]),c=A(c,u,f,a,G,22,s[11]),a=A(a,c,u,f,X,7,s[12]),f=A(f,a,c,u,D,12,s[13]),u=A(u,f,a,c,M,17,s[14]),c=A(c,u,f,a,L,22,s[15]),a=T(a,c,u,f,x,5,s[16]),f=T(f,a,c,u,R,9,s[17]),u=T(u,f,a,c,G,14,s[18]),c=T(c,u,f,a,g,20,s[19]),a=T(a,c,u,f,H,5,s[20]),f=T(f,a,c,u,j,9,s[21]),u=T(u,f,a,c,L,14,s[22]),c=T(c,u,f,a,C,20,s[23]),a=T(a,c,u,f,I,5,s[24]),f=T(f,a,c,u,M,9,s[25]),u=T(u,f,a,c,k,14,s[26]),c=T(c,u,f,a,O,20,s[27]),a=T(a,c,u,f,D,5,s[28]),f=T(f,a,c,u,_,9,s[29]),u=T(u,f,a,c,$,14,s[30]),c=T(c,u,f,a,X,20,s[31]),a=p(a,c,u,f,H,4,s[32]),f=p(f,a,c,u,O,11,s[33]),u=p(u,f,a,c,G,16,s[34]),c=p(c,u,f,a,M,23,s[35]),a=p(a,c,u,f,x,4,s[36]),f=p(f,a,c,u,C,11,s[37]),u=p(u,f,a,c,$,16,s[38]),c=p(c,u,f,a,j,23,s[39]),a=p(a,c,u,f,D,4,s[40]),f=p(f,a,c,u,g,11,s[41]),u=p(u,f,a,c,k,16,s[42]),c=p(c,u,f,a,R,23,s[43]),a=p(a,c,u,f,I,4,s[44]),f=p(f,a,c,u,X,11,s[45]),u=p(u,f,a,c,L,16,s[46]),c=p(c,u,f,a,_,23,s[47]),a=S(a,c,u,f,g,6,s[48]),f=S(f,a,c,u,$,10,s[49]),u=S(u,f,a,c,M,15,s[50]),c=S(c,u,f,a,H,21,s[51]),a=S(a,c,u,f,X,6,s[52]),f=S(f,a,c,u,k,10,s[53]),u=S(u,f,a,c,j,15,s[54]),c=S(c,u,f,a,x,21,s[55]),a=S(a,c,u,f,O,6,s[56]),f=S(f,a,c,u,L,10,s[57]),u=S(u,f,a,c,R,15,s[58]),c=S(c,u,f,a,D,21,s[59]),a=S(a,c,u,f,C,6,s[60]),f=S(f,a,c,u,G,10,s[61]),u=S(u,f,a,c,_,15,s[62]),c=S(c,u,f,a,I,21,s[63]),v[0]=v[0]+a|0,v[1]=v[1]+c|0,v[2]=v[2]+u|0,v[3]=v[3]+f|0},_doFinalize:function(){var w=this._data,l=w.words,m=this._nDataBytes*8,r=w.sigBytes*8;l[r>>>5]|=128<<24-r%32;var h=n.floor(m/4294967296),v=m;l[(r+64>>>9<<4)+15]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360,l[(r+64>>>9<<4)+14]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,w.sigBytes=(l.length+1)*4,this._process();for(var g=this._hash,x=g.words,_=0;_<4;_++){var k=x[_];x[_]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}return g},clone:function(){var w=b.clone.call(this);return w._hash=this._hash.clone(),w}});function A(w,l,m,r,h,v,g){var x=w+(l&m|~l&r)+h+g;return(x<<v|x>>>32-v)+l}function T(w,l,m,r,h,v,g){var x=w+(l&r|m&~r)+h+g;return(x<<v|x>>>32-v)+l}function p(w,l,m,r,h,v,g){var x=w+(l^m^r)+h+g;return(x<<v|x>>>32-v)+l}function S(w,l,m,r,h,v,g){var x=w+(m^(l|~r))+h+g;return(x<<v|x>>>32-v)+l}i.MD5=b._createHelper(B),i.HmacMD5=b._createHmacHelper(B)}(Math),o.MD5})})(le);var ar=le.exports;const ir=Et(ar),{MT:mt,shuffle:cr,randInt:lt}=fe,{convert:he,getCharset:ve}=et,de=(t,e)=>{const o=cr(t,e);return()=>(o.push(o.shift()),o)},me=(t,e=16,o=1,n)=>{const i=Number.isNaN(+e)?64:+e,d=ve(e),y=at(n!==void 0?n:lt(0,i)),b=mt(y),E=de(d,mt(lt(0,1e6,b))),s=typeof t=="string"?t.split(""):t,B=[n!==void 0?d[lt(0,i)]:he(y,10,e),...s.map(A=>E()[d.indexOf(A)])];return--o<1?B.join(""):me(B,e,o,n)},ge=(t,e=16,o=1,n)=>{const i=ve(e),d=at(n!==void 0?n:+he(t[0],e,10)),y=mt(d),b=de(i,mt(lt(0,1e6,y))),s=(typeof t=="string"?t.split(""):t).slice(1,t.length).map(B=>i[b().indexOf(B)]);return--o<1?s.join(""):ge(s,e,o,n)},{textToBase64:ur,base64ToText:fr,secureBase64:lr}=et;function pe(t,e=1,o){return typeof t=="object"?t=se(t):typeof t!="string"&&(t=Ht(t)),me(lr(ur(t)),64,e,o)}function hr(t,e=1,o,n=!0){if(t=fr(ge(t,64,e,o)),!n)return t;try{return JSON.parse(t)}catch{return t}}function vr(t,e=512,o){const n=pe(t,1,o).substring(1);return e==="MD5"?ir(n).toString():oe(n,{outputLength:e}).toString()}const dr={e:pe,d:hr,h:vr},mr=new Map([["THINKING","Please wait, I am answering another question..."]]);function gr(t,e){switch(t){case"model":if(["gpt3","gpt4","gpt-web","claude-2-web","gpt3-fga"].includes(e))return!0;break;case"temperature":if(typeof e=="number"&&e>=0&&e<=1)return!0;break;case"context":if(typeof e=="boolean")return!0;break}return!1}function pr(t){try{return JSON.parse(t)}catch{return t}}function ye(t){try{const e={};for(const o in t){const n=pr(t[o]);gr(o,n)&&(e[o]=n)}return e}catch{return{}}}function yr(t){try{return ye(Vt.parse(t))}catch{return{}}}function wr(t){try{return Vt.stringify(ye(t))}catch{return""}}let $t,Qt="";const we=z(),It=z(!1),_e=z(""),Y=z("gpt4"),rt=z(!0),F=z(.5),W=z([]),Q=z([]);tt(It,t=>{t||U()});const _r=t=>{It.value=!0,we.value=t,_e.value=t.Q,setTimeout(()=>xe(),0)};function xe(){try{document.querySelector(".EditMessageInput textarea").focus()}catch{}}const U=()=>{try{document.querySelector(".InputBox textarea").focus()}catch{}},nt=()=>new Promise((t,e)=>{$fetch("/api/curva/check",{method:"POST"}).then(o=>{const{list:n,saved:i}=o;Q.value=n.sort().map(d=>{var y,b,E;return{id:d,name:(y=i[d])==null?void 0:y.name,config:((b=i[d])==null?void 0:b.config)||"",mtime:((E=i[d])==null?void 0:E.mtime)||0}}).sort((d,y)=>d.mtime-y.mtime).reverse(),t(!0)}).catch(o=>{N.error("Initialization Failed"),e(o)})}),xr=t=>new Promise(async(e,o)=>{if(t==null)return e([]);const n=await $fetch("/api/curva/history",{method:"POST",body:{id:t}});(!n||n.length===0)&&dt("/c/");try{e(n.map(i=>Xt({...i,t:new Date(i.t),done:!!i.A})))}catch{dt("/c/"),e([])}}),Se=async function(t){return[]},Sr=async()=>{try{const t=W.value.at(-1),e=await Se(t.Q),o=Ct()>=document.body.clientHeight;t.more=e,o&&V()}catch(t){console.error(t)}},Wt=(t=!1)=>{Y.value="gpt4",rt.value=!0,F.value=.5,t&&N.success("Conversation settings have been reset.")};Wt();const K=z(!1),ot=z(K.value),st=z(K.value),ft=z(""),Br=Re(()=>Y.value.startsWith("gpt3")?16e3:32e3),Cr=(()=>{const{h:t}=dr,e=()=>[77,68,53].map(i=>String.fromCharCode(i)).join(""),o=(i,d)=>({hash:t(i,e(),d),timestamp:Ht(d)}),n=(i,d,y,b,E,s)=>{let B=P();return B||(B=fe.base64(8),Q.value.push({id:B,name:void 0}),dt(`/c/${B}?feature=new`)),{conv:B,messages:i,model:d,temperature:y,t:b,tz:E,id:s}};return async i=>{const d=new Date,y=d.getTime(),b=d.getTimezoneOffset()/60*-1,E=(()=>{if(!rt.value)return[{role:"user",content:(i==null?void 0:i.Q)||""}];const s=W.value.lastIndexOf(i)+1||W.value.length;let B=W.value.slice(0,s);return B=B.slice(B.length-100),B.map(A=>[{role:"user",content:A.Q},{role:"assistant",content:A.A}].filter(T=>T.content)).flat()})();try{const s=n(E,Y.value,F.value,y,b,i==null?void 0:i.id),B=o(E,y);return await $fetch("/api/curva/answer",{method:"POST",headers:B,body:s})}catch{return{answer:"",error:"Error while sending request."}}}})(),br=(t="",e="",o=!1)=>Xt({done:o,Q:t,A:e,queries:[],urls:[],dt:void 0,t:new Date}),ht=new Set,Ar=()=>{Q.value=[],W.value=[],dt("/c/"),At=!0};let At=!0;function Gt(){{const t=qe();t.get("feature")==="new"&&(t.delete("feature"),t.save())}}const Be=(t,e)=>{const o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),o.setAttribute("download",t),o.style.display="none",document.body.appendChild(o),o.click(),o.remove()},P=()=>{var t,e;return(e=(t=$t._route)==null?void 0:t.params)==null?void 0:e.conv},vt=()=>{var e;const t=P();return((e=Q.value.filter(o=>o.id===t)[0])==null?void 0:e.name)||""};async function Ce(t,e){return await $fetch("/api/curva/conv",{method:"PUT",body:{id:t||P(),name:e||vt(),config:wr({model:Y.value,temperature:F.value,context:rt.value})}})}let Tt=!1;const Tr=t=>{var n;if(t===void 0&&(t=P()),t==null)return;const e=yr(((n=Q.value.filter(i=>i.id===t)[0])==null?void 0:n.config)||""),o=Object.keys(e);if(o.length===0)Wt();else{Tt=!0;try{for(const i of o){const d=e[i];switch(i){case"model":Y.value=d;break;case"temperature":F.value=d;break;case"context":rt.value=d;break}}}finally{Tt=!1}}N.info("Conversation settings have been loaded.")};setTimeout(()=>{let t;[Y,rt,F].forEach(e=>{tt(e,(o,n)=>{$t&&!Tt&&o!==n&&ht.size===0&&(clearTimeout(t),t=setTimeout(async()=>{try{await Ce(),N.info("Conversation settings have been saved.")}catch(i){console.error(i),N.warning("Failed to save conversation settings.")}finally{clearTimeout(t)}},typeof e.value=="number"?500:0))})})},1e3);const Er=t=>{W.value=W.value.filter(e=>e.id!==t),$fetch("/api/curva/answer",{method:"DELETE",body:{conv:P(),id:t}}).then(()=>N.info("The message has been deleted.")).catch(()=>N.error("An error occurred while deleting the message."))},Hr=()=>{let t=0;const e=`${et.convert(P(),"64w",10)}.md`,o=W.value.map(n=>{t++;try{return(n.t?`${new Date(n.t.getTime()-(n.dt||0)).toLocaleString()}${n.dt===void 0?"":" (Δt: "+n.dt.toString()+"ms)"}

`:"")+(n.Q?`QUESTION ${t}:

${n.Q.replaceAll(`
`,`

`)}`:"")+(n.Q&&n.A?`

`:"")+(n.A?`ANSWER ${t}:

${n.A}`:"")}catch{return"(Unknown message)"}}).join(`

---

`)+`

---

`;Be(e,o)},kr=()=>{Be(`${et.convert(P(),"64w",10)}.json`,JSON.stringify(W.value.map(t=>({question:t.Q,answer:t.A,created:new Date(t.t.getTime()).toUTCString(),timeUsed:t.dt||void 0,queries:t.queries||void 0,urls:t.urls||void 0})),null,4))};function Nr(){const t=zt("appName").value,e=$e(),o=+(e.has(yt)?e.get(yt):.5);e.delete(Mt,{path:"/"}),e.delete(Mt),e.delete(Lt,{path:"/"}),e.delete(Lt),o>=0&&o<=1&&(F.value=o),tt(F,p=>{F.value=Math.round(p*10)/10,e.set(yt,`${p}`,{path:"/"})}),$t=We(),tt(K,p=>{jt().isMobileScreen?(ot.value=!1,st.value!==p&&(st.value=p)):(st.value=!1,ot.value!==p&&(ot.value=p)),setTimeout(()=>{try{U()}catch{}},0)}),tt(st,p=>{K.value=p}),tt(ot,p=>{K.value=p});const n=()=>{try{Ot(`${vt()||y("chat.title")} - ${t}`)}catch{Ot(`${y("chat.title")} - ${t}`)}},i=async p=>{jt().isMobileScreen&&(K.value=!1),W.value=[];const S=gt.service();try{const w=await Promise.all([p===null&&Q.value.length>0?null:nt(),p===null?null:xr(p)]);Tr(p);const l=w[1];l!==null&&P()===p&&(W.value=l,Sr())}finally{if(V(),S!==null)try{await V(500)}finally{S.close();try{await V(500)}finally{}}}setTimeout(()=>U(),500)},d=async(p,S=!1)=>{const w=Promise.all([...ht]),l=At&&S?new Promise(async m=>{await i(p),Gt(),m(null)}):S?new Promise(m=>m(null)):i(p);At=!1,ht.add(l);try{await w}catch{}try{await l}finally{ht.delete(l)}},y=Ie().t,b=zt("version"),E=async(p,S)=>{if(document.querySelectorAll(".Message.T").length>0)return N.info("Please wait for the completion of the previous question."),U(),!1;const l=(p!==void 0?p:ft.value).trim();if(p===void 0&&(ft.value="",l===""))return U(),!1;const m=(S?W.value.filter(I=>I.id===S).at(-1):void 0)||br(l,"",!1);W.value.includes(m)||W.value.push(m),m.done=!1,m.Q=l,m.A="",m.urls=[],m.queries=[];const r=Se(),h=Ct()>=document.body.clientHeight,v=P();h&&V().finally(()=>U());const g=await Cr(m);Gt(),Qt!==v&&(Qt=v,nt().then(()=>{try{document.querySelector(".ConversationList").scrollTop=0}catch{}}));const{id:x,answer:_="",error:k,urls:C=[],queries:H=[],dt:R=0,version:$}=g;m.done=!0,m.t=new Date,m.dt=R||void 0,m.id=x||void 0,m.A=_||"",m.urls=C||[],m.queries=H||[];const O=(I=>I?(I.type==="warning"?N.warning(I.content):N.error(I.content),m.A="Oops! Something went wrong!",!0):!1)((()=>{if(_===""){if(k){const I=W.value.indexOf(m);switch(k){case"THINKING":return W.value.splice(I,1),ft.value=l,{type:"warning",content:mr.get(k)};default:return{type:"error",content:k}}}return{type:"error",content:y("error.plzRefresh")}}})());return setTimeout(async()=>{!S&&h&&await V(),$&&$!==b.value&&pt.confirm(y("action.newVersion"),y("message.notice"),{confirmButtonText:y("message.ok"),cancelButtonText:y("message.cancel"),type:"warning"}).then(()=>{const I=gt.service();location.reload(),setTimeout(()=>I.close(),3e3)}).catch(()=>U())},0),r.then(I=>{const j=Ct()>=document.body.clientHeight;m.more=I,j&&V()}),O};return{isEditingMessage:It,editingMessage:we,callEditMessageDialog:_r,editingMessageContent:_e,focusEditMessageInput:xe,model:Y,conversations:Q,messages:W,temperature:F,contextMode:rt,openMenu:K,openSidebar:ot,openDrawer:st,inputValue:ft,inputMaxLength:Br,getCurrentConvId:P,getCurrentConvName:vt,checkTokenAndGetConversations:nt,loadChat:d,sendMessage:E,deleteMessage:Er,regenerateMessage:async p=>{if(W.value.length===0)return;const{Q:S,id:w}=p||W.value.at(-1);E(S||"",w)},focusInput:U,refreshConversation:()=>{d(P())},renameConversation:(p,S="")=>{p||(p=P(),S=vt()),pt.prompt(y("message.renameConvHint"),y("message.setting"),{confirmButtonText:y("message.ok"),cancelButtonText:y("message.cancel"),inputValue:S,inputPlaceholder:et.convert(p,"64w",10)}).then(async({value:w})=>{try{await Ce(p,w),N({type:"success",message:y("message.renameSuccess")}),await nt(),n()}catch{N({type:"error",message:"Oops! Something went wrong!"})}}).catch(()=>{})},deleteConversation:p=>{var r,h;const S=p||P(),w=[...Q.value];let l=-1,m="createNewChat";for(let v=0;v<w.length;v++)if(w[v].id===S){l=v;break}if(l!==-1){const v=(r=w[l-1])==null?void 0:r.id,g=(h=w[l+1])==null?void 0:h.id;v!==void 0?m=v:g!==void 0&&(m=g)}pt.confirm(y("message.deleteConvConfirm"),y("message.warning"),{confirmButtonText:y("message.ok"),cancelButtonText:y("message.cancel"),type:"warning"}).then(()=>{const v=gt.service();$fetch("/api/curva/conv",{method:"DELETE",body:{id:S}}).finally(async()=>{var g;v.close(),p===P()?(g=document.getElementById(m))==null||g.click():await nt()})})},resetConvConfig:Wt,exportAsMarkdown:Hr,exportAsJson:kr,clear:Ar}}export{V as a,et as b,jt as c,fe as r,Nr as u};
