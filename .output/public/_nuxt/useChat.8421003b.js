var xe=Object.defineProperty;var Se=(t,e,o)=>e in t?xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var nt=(t,e,o)=>(Se(t,typeof e!="symbol"?e+"":e,o),o);import{ca as bt,cb as Ce,cc as Be,cd as Te,ce as be,cf as K,r as D,h as rt,ab as Qt,V as Ae,E as L,i as Lt,cg as Ee,D as He,g as ke,A as lt,ch as St,z as dt,l as Vt,ci as Re}from"./entry.63017803.js";import{E as mt}from"./el-overlay.304af7b7.js";import"./el-button.4b05d2d1.js";import"./el-input.319210a1.js";import{u as Nt}from"./useTitle.179a5688.js";var Ie=Ce,$e=Be,We=Te,Pe={formats:We,parse:$e,stringify:Ie};const Gt=bt(Pe);async function X(t=0){return await new Promise((e,o)=>{setTimeout(()=>{try{window.scrollTo({behavior:"smooth",left:0,top:document.body.scrollHeight}),e(null)}catch(r){o(r)}},+t||0)})}const qe={get isMobileScreen(){return window.innerWidth<600},get isTouchScreen(){return"ontouchstart"in document||navigator.maxTouchPoints>0}};function ft(){return qe}var Xt={exports:{}};function De(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gt={exports:{}},Mt;function At(){return Mt||(Mt=1,function(t,e){(function(o,r){t.exports=r()})(K,function(){var o=o||function(r,h){var v;if(typeof window<"u"&&window.crypto&&(v=window.crypto),typeof self<"u"&&self.crypto&&(v=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(v=globalThis.crypto),!v&&typeof window<"u"&&window.msCrypto&&(v=window.msCrypto),!v&&typeof K<"u"&&K.crypto&&(v=K.crypto),!v&&typeof De=="function")try{v=be}catch{}var b=function(){if(v){if(typeof v.getRandomValues=="function")try{return v.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof v.randomBytes=="function")try{return v.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},T=Object.create||function(){function n(){}return function(f){var d;return n.prototype=f,d=new n,n.prototype=null,d}}(),k={},s=k.lib={},H=s.Base=function(){return{extend:function(n){var f=T(this);return n&&f.mixIn(n),(!f.hasOwnProperty("init")||this.init===f.init)&&(f.init=function(){f.$super.init.apply(this,arguments)}),f.init.prototype=f,f.$super=this,f},create:function(){var n=this.extend();return n.init.apply(n,arguments),n},init:function(){},mixIn:function(n){for(var f in n)n.hasOwnProperty(f)&&(this[f]=n[f]);n.hasOwnProperty("toString")&&(this.toString=n.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),B=s.WordArray=H.extend({init:function(n,f){n=this.words=n||[],f!=h?this.sigBytes=f:this.sigBytes=n.length*4},toString:function(n){return(n||x).stringify(this)},concat:function(n){var f=this.words,d=n.words,g=this.sigBytes,w=n.sigBytes;if(this.clamp(),g%4)for(var y=0;y<w;y++){var A=d[y>>>2]>>>24-y%4*8&255;f[g+y>>>2]|=A<<24-(g+y)%4*8}else for(var S=0;S<w;S+=4)f[g+S>>>2]=d[S>>>2];return this.sigBytes+=w,this},clamp:function(){var n=this.words,f=this.sigBytes;n[f>>>2]&=4294967295<<32-f%4*8,n.length=r.ceil(f/4)},clone:function(){var n=H.clone.call(this);return n.words=this.words.slice(0),n},random:function(n){for(var f=[],d=0;d<n;d+=4)f.push(b());return new B.init(f,n)}}),m=k.enc={},x=m.Hex={stringify:function(n){for(var f=n.words,d=n.sigBytes,g=[],w=0;w<d;w++){var y=f[w>>>2]>>>24-w%4*8&255;g.push((y>>>4).toString(16)),g.push((y&15).toString(16))}return g.join("")},parse:function(n){for(var f=n.length,d=[],g=0;g<f;g+=2)d[g>>>3]|=parseInt(n.substr(g,2),16)<<24-g%8*4;return new B.init(d,f/2)}},C=m.Latin1={stringify:function(n){for(var f=n.words,d=n.sigBytes,g=[],w=0;w<d;w++){var y=f[w>>>2]>>>24-w%4*8&255;g.push(String.fromCharCode(y))}return g.join("")},parse:function(n){for(var f=n.length,d=[],g=0;g<f;g++)d[g>>>2]|=(n.charCodeAt(g)&255)<<24-g%4*8;return new B.init(d,f)}},p=m.Utf8={stringify:function(n){try{return decodeURIComponent(escape(C.stringify(n)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(n){return C.parse(unescape(encodeURIComponent(n)))}},i=s.BufferedBlockAlgorithm=H.extend({reset:function(){this._data=new B.init,this._nDataBytes=0},_append:function(n){typeof n=="string"&&(n=p.parse(n)),this._data.concat(n),this._nDataBytes+=n.sigBytes},_process:function(n){var f,d=this._data,g=d.words,w=d.sigBytes,y=this.blockSize,A=y*4,S=w/A;n?S=r.ceil(S):S=r.max((S|0)-this._minBufferSize,0);var E=S*y,R=r.min(E*4,w);if(E){for(var I=0;I<E;I+=y)this._doProcessBlock(g,I);f=g.splice(0,E),d.sigBytes-=R}return new B.init(f,R)},clone:function(){var n=H.clone.call(this);return n._data=this._data.clone(),n},_minBufferSize:0});s.Hasher=i.extend({cfg:H.extend(),init:function(n){this.cfg=this.cfg.extend(n),this.reset()},reset:function(){i.reset.call(this),this._doReset()},update:function(n){return this._append(n),this._process(),this},finalize:function(n){n&&this._append(n);var f=this._doFinalize();return f},blockSize:16,_createHelper:function(n){return function(f,d){return new n.init(d).finalize(f)}},_createHmacHelper:function(n){return function(f,d){return new _.HMAC.init(n,d).finalize(f)}}});var _=k.algo={};return k}(Math);return o})}(gt)),gt.exports}var pt={exports:{}},Ot;function ze(){return Ot||(Ot=1,function(t,e){(function(o,r){t.exports=r(At())})(K,function(o){return function(r){var h=o,v=h.lib,b=v.Base,T=v.WordArray,k=h.x64={};k.Word=b.extend({init:function(s,H){this.high=s,this.low=H}}),k.WordArray=b.extend({init:function(s,H){s=this.words=s||[],H!=r?this.sigBytes=H:this.sigBytes=s.length*8},toX32:function(){for(var s=this.words,H=s.length,B=[],m=0;m<H;m++){var x=s[m];B.push(x.high),B.push(x.low)}return T.create(B,this.sigBytes)},clone:function(){for(var s=b.clone.call(this),H=s.words=this.words.slice(0),B=H.length,m=0;m<B;m++)H[m]=H[m].clone();return s}})}(),o})}(pt)),pt.exports}(function(t,e){(function(o,r,h){t.exports=r(At(),ze())})(K,function(o){return function(r){var h=o,v=h.lib,b=v.WordArray,T=v.Hasher,k=h.x64,s=k.Word,H=h.algo,B=[],m=[],x=[];(function(){for(var i=1,_=0,n=0;n<24;n++){B[i+5*_]=(n+1)*(n+2)/2%64;var f=_%5,d=(2*i+3*_)%5;i=f,_=d}for(var i=0;i<5;i++)for(var _=0;_<5;_++)m[i+5*_]=_+(2*i+3*_)%5*5;for(var g=1,w=0;w<24;w++){for(var y=0,A=0,S=0;S<7;S++){if(g&1){var E=(1<<S)-1;E<32?A^=1<<E:y^=1<<E-32}g&128?g=g<<1^113:g<<=1}x[w]=s.create(y,A)}})();var C=[];(function(){for(var i=0;i<25;i++)C[i]=s.create()})();var p=H.SHA3=T.extend({cfg:T.cfg.extend({outputLength:512}),_doReset:function(){for(var i=this._state=[],_=0;_<25;_++)i[_]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(i,_){for(var n=this._state,f=this.blockSize/2,d=0;d<f;d++){var g=i[_+2*d],w=i[_+2*d+1];g=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360;var y=n[d];y.high^=w,y.low^=g}for(var A=0;A<24;A++){for(var S=0;S<5;S++){for(var E=0,R=0,I=0;I<5;I++){var y=n[S+5*I];E^=y.high,R^=y.low}var O=C[S];O.high=E,O.low=R}for(var S=0;S<5;S++)for(var $=C[(S+4)%5],F=C[(S+1)%5],V=F.high,G=F.low,E=$.high^(V<<1|G>>>31),R=$.low^(G<<1|V>>>31),I=0;I<5;I++){var y=n[S+5*I];y.high^=E,y.low^=R}for(var z=1;z<25;z++){var E,R,y=n[z],U=y.high,j=y.low,a=B[z];a<32?(E=U<<a|j>>>32-a,R=j<<a|U>>>32-a):(E=j<<a-32|U>>>64-a,R=U<<a-32|j>>>64-a);var c=C[m[z]];c.high=E,c.low=R}var u=C[0],l=n[0];u.high=l.high,u.low=l.low;for(var S=0;S<5;S++)for(var I=0;I<5;I++){var z=S+5*I,y=n[z],Pt=C[z],qt=C[(S+1)%5+5*I],Dt=C[(S+2)%5+5*I];y.high=Pt.high^~qt.high&Dt.high,y.low=Pt.low^~qt.low&Dt.low}var y=n[0],zt=x[A];y.high^=zt.high,y.low^=zt.low}},_doFinalize:function(){var i=this._data,_=i.words;this._nDataBytes*8;var n=i.sigBytes*8,f=this.blockSize*32;_[n>>>5]|=1<<24-n%32,_[(r.ceil((n+1)/f)*f>>>5)-1]|=128,i.sigBytes=_.length*4,this._process();for(var d=this._state,g=this.cfg.outputLength/8,w=g/8,y=[],A=0;A<w;A++){var S=d[A],E=S.high,R=S.low;E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,y.push(R),y.push(E)}return new b.init(y,g)},clone:function(){for(var i=T.clone.call(this),_=i._state=this._state.slice(0),n=0;n<25;n++)_[n]=_[n].clone();return i}});h.SHA3=T._createHelper(p),h.HmacSHA3=T._createHmacHelper(p)}(Math),o.SHA3})})(Xt);var Le=Xt.exports;const Kt=bt(Le);var Jt={exports:{}};(function(t,e){(function(o,r){t.exports=r(At())})(K,function(o){return function(r){var h=o,v=h.lib,b=v.WordArray,T=v.Hasher,k=h.algo,s=[];(function(){for(var p=0;p<64;p++)s[p]=r.abs(r.sin(p+1))*4294967296|0})();var H=k.MD5=T.extend({_doReset:function(){this._hash=new b.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,i){for(var _=0;_<16;_++){var n=i+_,f=p[n];p[n]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360}var d=this._hash.words,g=p[i+0],w=p[i+1],y=p[i+2],A=p[i+3],S=p[i+4],E=p[i+5],R=p[i+6],I=p[i+7],O=p[i+8],$=p[i+9],F=p[i+10],V=p[i+11],G=p[i+12],z=p[i+13],U=p[i+14],j=p[i+15],a=d[0],c=d[1],u=d[2],l=d[3];a=B(a,c,u,l,g,7,s[0]),l=B(l,a,c,u,w,12,s[1]),u=B(u,l,a,c,y,17,s[2]),c=B(c,u,l,a,A,22,s[3]),a=B(a,c,u,l,S,7,s[4]),l=B(l,a,c,u,E,12,s[5]),u=B(u,l,a,c,R,17,s[6]),c=B(c,u,l,a,I,22,s[7]),a=B(a,c,u,l,O,7,s[8]),l=B(l,a,c,u,$,12,s[9]),u=B(u,l,a,c,F,17,s[10]),c=B(c,u,l,a,V,22,s[11]),a=B(a,c,u,l,G,7,s[12]),l=B(l,a,c,u,z,12,s[13]),u=B(u,l,a,c,U,17,s[14]),c=B(c,u,l,a,j,22,s[15]),a=m(a,c,u,l,w,5,s[16]),l=m(l,a,c,u,R,9,s[17]),u=m(u,l,a,c,V,14,s[18]),c=m(c,u,l,a,g,20,s[19]),a=m(a,c,u,l,E,5,s[20]),l=m(l,a,c,u,F,9,s[21]),u=m(u,l,a,c,j,14,s[22]),c=m(c,u,l,a,S,20,s[23]),a=m(a,c,u,l,$,5,s[24]),l=m(l,a,c,u,U,9,s[25]),u=m(u,l,a,c,A,14,s[26]),c=m(c,u,l,a,O,20,s[27]),a=m(a,c,u,l,z,5,s[28]),l=m(l,a,c,u,y,9,s[29]),u=m(u,l,a,c,I,14,s[30]),c=m(c,u,l,a,G,20,s[31]),a=x(a,c,u,l,E,4,s[32]),l=x(l,a,c,u,O,11,s[33]),u=x(u,l,a,c,V,16,s[34]),c=x(c,u,l,a,U,23,s[35]),a=x(a,c,u,l,w,4,s[36]),l=x(l,a,c,u,S,11,s[37]),u=x(u,l,a,c,I,16,s[38]),c=x(c,u,l,a,F,23,s[39]),a=x(a,c,u,l,z,4,s[40]),l=x(l,a,c,u,g,11,s[41]),u=x(u,l,a,c,A,16,s[42]),c=x(c,u,l,a,R,23,s[43]),a=x(a,c,u,l,$,4,s[44]),l=x(l,a,c,u,G,11,s[45]),u=x(u,l,a,c,j,16,s[46]),c=x(c,u,l,a,y,23,s[47]),a=C(a,c,u,l,g,6,s[48]),l=C(l,a,c,u,I,10,s[49]),u=C(u,l,a,c,U,15,s[50]),c=C(c,u,l,a,E,21,s[51]),a=C(a,c,u,l,G,6,s[52]),l=C(l,a,c,u,A,10,s[53]),u=C(u,l,a,c,F,15,s[54]),c=C(c,u,l,a,w,21,s[55]),a=C(a,c,u,l,O,6,s[56]),l=C(l,a,c,u,j,10,s[57]),u=C(u,l,a,c,R,15,s[58]),c=C(c,u,l,a,z,21,s[59]),a=C(a,c,u,l,S,6,s[60]),l=C(l,a,c,u,V,10,s[61]),u=C(u,l,a,c,y,15,s[62]),c=C(c,u,l,a,$,21,s[63]),d[0]=d[0]+a|0,d[1]=d[1]+c|0,d[2]=d[2]+u|0,d[3]=d[3]+l|0},_doFinalize:function(){var p=this._data,i=p.words,_=this._nDataBytes*8,n=p.sigBytes*8;i[n>>>5]|=128<<24-n%32;var f=r.floor(_/4294967296),d=_;i[(n+64>>>9<<4)+15]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,i[(n+64>>>9<<4)+14]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360,p.sigBytes=(i.length+1)*4,this._process();for(var g=this._hash,w=g.words,y=0;y<4;y++){var A=w[y];w[y]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return g},clone:function(){var p=T.clone.call(this);return p._hash=this._hash.clone(),p}});function B(p,i,_,n,f,d,g){var w=p+(i&_|~i&n)+f+g;return(w<<d|w>>>32-d)+i}function m(p,i,_,n,f,d,g){var w=p+(i&n|_&~n)+f+g;return(w<<d|w>>>32-d)+i}function x(p,i,_,n,f,d,g){var w=p+(i^_^n)+f+g;return(w<<d|w>>>32-d)+i}function C(p,i,_,n,f,d,g){var w=p+(_^(i|~n))+f+g;return(w<<d|w>>>32-d)+i}h.MD5=T._createHelper(H),h.HmacMD5=T._createHmacHelper(H)}(Math),o.MD5})})(Jt);var Ne=Jt.exports;const Me=bt(Ne),vt=t=>{try{if((t==null?void 0:t.toString)===void 0)return`${t}`;{const e=t.toString();return e.startsWith("[object ")&&e.endsWith("]")?JSON.stringify(t):e}}catch{return""}},Oe=t=>vt(t).toLowerCase();function Fe(t){try{return typeof t[Symbol==null?void 0:Symbol.iterator]=="function"}catch{return!1}}function Yt(t){const e=new Set;return JSON.stringify(t,(r,h)=>{if(typeof h=="object"&&h!==null){if(e.has(h))return;e.add(h),Fe(h)&&(h=[...h])}return h})}const Zt="01",te="0123456789",ee="0123456789abcdef",re="0123456789abcdefghijklmnopqrstuvwxyz",ne="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Ct=t=>{switch(typeof t!="string"&&(t=Oe(t)),t){case"2":return Zt;case"10":return te;case"16":return ee;case"36":return re;case"62":return ne;case"64":return J;case"64w":case"64+":return oe;default:return t}},Ue=(t,e,o,r=0)=>{typeof t!="string"&&(t=vt(t));let h=BigInt(0);e=Ct(e);const v=e.length;for(let T=0;T<t.length;T++)h+=BigInt(e.indexOf(t[T])*Math.pow(v,t.length-1-T));let b="";if(o=Ct(o),b===""){const T=BigInt(o.length);for(;h>0;)b=o.charAt(+BigInt(h%T).toString())+b,h=BigInt(h/T)}return(b===""?o.charAt(0):b).padStart(r,o[0])},je=t=>{const e=t.split("").map(v=>v.charCodeAt(0)),o=[];let r=0;for(;r<e.length;){const[v,b=0,T=0]=e.slice(r,r+=3),k=(v<<16)+(b<<8)+T,s=k>>18,H=k>>12&63,B=k>>6&63,m=k&63;o.push(J[s],J[H],J[B],J[m])}const h=e.length%3;return o.join("").slice(0,1+o.length-h)+(h===2?"==":h===1?"=":"")},Qe=/[^A-Za-z0-9+/]/g,se=t=>t.replace(Qe,""),yt=t=>String.fromCharCode(+t),Ve=t=>{const e=se(t).split(""),o=[];let r=0;for(;r<e.length;){const[h,v,b,T]=e.slice(r,r+=4).map(k=>J.indexOf(k));o.push(yt(h<<2|v>>4)),b!==64&&o.push(yt((v&15)<<4|b>>2)),T!==64&&o.push(yt((b&3)<<6|T))}return o.join("").replaceAll("\0","")},Z={BASE2_CHARSET:Zt,BASE10_CHARSET:te,BASE16_CHARSET:ee,BASE36_CHARSET:re,BASE62_CHARSET:ne,BASE64_CHARSET:J,BASE64WEB_CHARSET:oe,convert:Ue,getCharset:Ct,secureBase64:se,textToBase64:je,base64ToText:Ve};function Ge(...t){return t.reduce((e,o)=>e+o,0)}const Xe=t=>Kt(t,{outputLength:256}).toString(),Ke=/0b[0-1]+/i;function ht(t){if(typeof t=="number")return Math.round(t);if(t instanceof Object&&(t=Yt(t)),typeof t=="string"){if(Ke.test(t))return parseInt(t.substring(2,t.length-1),2);const e=parseInt(t);return Number.isNaN(e)?e:Ge(parseInt(Xe(t),16))}else return Date.now()}const P=624,ot=397,Je=2567483615,wt=2147483648,_t=2147483647;class Ye{constructor(e){nt(this,"mt",new Array(P));nt(this,"mti",P+1);nt(this,"seed");return this.seed=e=ht(e),Array.isArray(e)?this.init_by_array(e,e.length):this.init_seed(e),this}init_seed(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<P;this.mti++)e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(((e&4294901760)>>>16)*1812433253<<16)+(e&65535)*1812433253+this.mti,this.mt[this.mti]>>>=0}init_by_array(e,o){let r,h,v;for(this.init_seed(19650218),r=1,h=0,v=P>o?P:o;v!==0;v--){const b=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(((b&4294901760)>>>16)*1664525<<16)+(b&65535)*1664525)+e[h]+h,this.mt[r]>>>=0,r++,h++,r>=P&&(this.mt[0]=this.mt[P-1],r=1),h>=o&&(h=0)}for(v=P-1;v!==0;v--){const b=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(((b&4294901760)>>>16)*1566083941<<16)+(b&65535)*1566083941)-r,this.mt[r]>>>=0,r++,r>=P&&(this.mt[0]=this.mt[P-1],r=1)}this.mt[0]=2147483648}random_int(){let e;const o=new Array(0,Je);if(this.mti>=P){let r;for(this.mti===P+1&&this.init_seed(5489),r=0;r<P-ot;r++)e=this.mt[r]&wt|this.mt[r+1]&_t,this.mt[r]=this.mt[r+ot]^e>>>1^o[e&1];for(;r<P-1;r++)e=this.mt[r]&wt|this.mt[r+1]&_t,this.mt[r]=this.mt[r+(ot-P)]^e>>>1^o[e&1];e=this.mt[P-1]&wt|this.mt[0]&_t,this.mt[P-1]=this.mt[ot-1]^e>>>1^o[e&1],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^=e>>>18,e>>>0}random_int31(){return this.random_int()>>>1}random_incl(){return this.random_int()*(1/4294967295)}random(){return this.random_int()*(1/4294967296)}random_excl(){return(this.random_int()+.5)*(1/4294967296)}random_long(){return((this.random_int()>>>5)*67108864+(this.random_int()>>>6))*(1/9007199254740992)}}function ae(t){return new Ye(t)}const{BASE10_CHARSET:Ze,BASE16_CHARSET:tr,BASE64WEB_CHARSET:er}=Z,rr=ae(),ie=(t=rr)=>t.random(),Et=(t,e,o)=>((e===void 0||e===0)&&(e=t,t=0),Math.floor(t+ie(o)*e)),ce=(t,e)=>t[Et(0,t.length,e)],ue=(t,e=1,o)=>{const r=[],h=[];for(let v=0;v<e;v++)h.length===0&&h.push(...t),r.push(h.splice(Et(0,h.length,o),1)[0]);return r},nr=(t,e)=>ue(t,t.length,e),st=(t,e=8,o)=>new Array(e).fill(0).map(r=>ce(t,o)).join(""),le={MT:ae,toSeed:ht,rand:ie,randInt:Et,charset:st,choice:ce,choices:ue,shuffle:nr,base10:(t=6,e)=>st(Ze,t,e),base16:(t=32,e)=>st(tr,t,e),base64:(t=32,e)=>st(er,t,e),lcg(t){let e=ht(t);return()=>(e=(e*1664525+1013904223)%4294967296)/4294967296}},{MT:Ft,shuffle:or,randInt:xt}=le,{convert:sr,getCharset:ar}=Z,ir=(t,e)=>{const o=or(t,e);return()=>(o.push(o.shift()),o)},fe=(t,e=16,o=1,r)=>{const h=Number.isNaN(+e)?64:+e,v=ar(e),b=ht(r!==void 0?r:xt(0,h)),T=Ft(b),k=ir(v,Ft(xt(0,1e6,T))),s=typeof t=="string"?t.split(""):t,H=[r!==void 0?v[xt(0,h)]:sr(b,10,e),...s.map(B=>k()[v.indexOf(B)])];return--o<1?H.join(""):fe(H,e,o,r)},{textToBase64:cr,base64ToText:Pr,secureBase64:ur}=Z;function lr(t,e=1,o){return typeof t=="object"?t=Yt(t):typeof t!="string"&&(t=vt(t)),fe(ur(cr(t)),64,e,o)}function fr(t,e=512,o){const r=lr(t,1,o).substring(1);return e==="MD5"?Me(r).toString():Kt(r,{outputLength:e}).toString()}const hr=new Map([["THINKING","Please wait, I am answering another question..."]]);function vr(t,e){switch(t){case"model":if(["gpt3","gpt4","gpt-web","claude-2-web","gpt3-fga"].includes(e))return!0;break;case"temperature":if(typeof e=="number"&&e>=0&&e<=1)return!0;break;case"context":if(typeof e=="boolean")return!0;break}return!1}function dr(t){try{return JSON.parse(t)}catch{return t}}function he(t){try{const e={};for(const o in t){const r=dr(t[o]);vr(o,r)&&(e[o]=r)}return e}catch{return{}}}function mr(t){try{return he(Gt.parse(t))}catch{return{}}}function gr(t){try{return Gt.stringify(he(t))}catch{return""}}let Ht,Ut="";const ve=D(),kt=D(!1),de=D(""),Y=D("gpt4"),tt=D(!0),et=D(.5),W=D([]),Q=D([]);rt(kt,t=>{t||M()});const pr=t=>{kt.value=!0,ve.value=t,de.value=t.Q,setTimeout(()=>me(),0)};function me(){try{document.querySelector(".EditMessageInput textarea").focus()}catch{}}const M=()=>{try{{const t=document.querySelector(".InputBox textarea");t.click(),t.focus()}}catch{}},ge=()=>{try{const t=document.getElementById(q()).parentElement,e=document.querySelector(".ConversationList"),o=t.offsetTop-e.offsetTop-t.clientHeight/2,r=o-e.clientHeight+t.clientHeight*2;e.scrollTop>o&&e.scrollTo({left:0,top:o,behavior:"smooth"}),e.scrollTop<r&&e.scrollTo({left:0,top:r,behavior:"smooth"})}catch{}},at=()=>new Promise((t,e)=>{$fetch("/api/curva/check",{method:"POST"}).then(o=>{Q.value=o,ge(),t(!0)}).catch(o=>{L.error("Initialization Failed"),e(o)})}),yr=t=>new Promise(async(e,o)=>{if(t==null)return e([]);const r=await $fetch("/api/curva/history",{method:"POST",body:{id:t}});(!r||r.length===0)&&lt("/c/");try{e(r.map(h=>Vt({...h,t:new Date(h.t),done:!!h.A})))}catch{lt("/c/"),e([])}}),pe=async function(t){return[]},wr=async()=>{try{const t=W.value.at(-1),e=await pe(t.Q),o=St()>=document.body.clientHeight;t.more=e,o&&X()}catch(t){console.error(t)}},Rt=(t=!1)=>{Y.value="gpt4",tt.value=!0,et.value=.5,t&&L.success("Conversation settings have been reset.")};Rt();const N=D(!1),It=D(N.value),$t=D(N.value);rt(It,t=>{N.value=t});rt($t,t=>{N.value=t});rt(N,t=>{const{isMobileScreen:e}=ft();It.value=e?!1:t,$t.value=e?t:!1,setTimeout(()=>M(),0)});{let t,e=ft().isMobileScreen?"drawer":"sidebar";window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>{const o=ft().isMobileScreen?"drawer":"sidebar";N.value&&o!=e&&(N.value=!1,setTimeout(()=>{N.value=!0},0),e=o)},100)})}const it=D(""),_r=Qt(()=>Y.value.startsWith("gpt3")?16e3:32e3),xr=(()=>{const t=()=>[77,68,53].map(r=>String.fromCharCode(r)).join(""),e=(r,h)=>({hash:fr(r,t(),h),timestamp:vt(h)}),o=(r,h,v,b,T,k)=>{let s=q();return s||(s=le.base64(8),Q.value.unshift({id:s,name:"",mtime:Date.now(),config:""}),lt(`/c/${s}?feature=new`),we(s)),{conv:s,messages:r,model:h,temperature:v,t:b,tz:T,id:k}};return async r=>{const h=new Date,v=h.getTime(),b=h.getTimezoneOffset()/60*-1,T=(()=>{if(!tt.value)return[{role:"user",content:(r==null?void 0:r.Q)||""}];const k=W.value.lastIndexOf(r)+1||W.value.length;let s=W.value.slice(0,k);return s=s.slice(s.length-100),s.map(H=>[{role:"user",content:H.Q},{role:"assistant",content:H.A}].filter(B=>B.content)).flat()})();try{const k=o(T,Y.value,et.value,v,b,r==null?void 0:r.id),s=e(T,v);return await $fetch("/api/curva/answer",{method:"POST",headers:s,body:k})}catch{return{answer:"",error:"Error while sending request."}}}})(),Sr=(t="",e="",o=!1)=>Vt({done:o,Q:t,A:e,queries:[],urls:[],dt:void 0,t:new Date}),ct=new Set,Cr=()=>{Q.value=[],W.value=[],lt("/c/"),Bt=!0};let Bt=!0;function jt(){{const t=Re();t.get("feature")==="new"&&(t.delete("feature"),t.save(),Wt())}}const ye=(t,e)=>{const o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),o.setAttribute("download",t),o.style.display="none",document.body.appendChild(o),o.click(),o.remove()},[Br,q,we]=(()=>{const t=D("");return[Qt(()=>t.value),()=>t.value,e=>{var o,r;return t.value=e===void 0?(r=(o=Ht._route)==null?void 0:o.params)==null?void 0:r.conv:e}]})(),ut=()=>{var e;const t=q();return((e=Q.value.filter(o=>o.id===t)[0])==null?void 0:e.name)||""};async function Wt(t,e){return t=t||q(),t?await $fetch("/api/curva/conv",{method:"PUT",body:{id:t,name:e||ut(),config:gr({model:Y.value,temperature:et.value,context:tt.value})}}):{cancel:!0}}let Tt=!1;const Tr=t=>{var r;if(t===void 0&&(t=q()),t==null)return;const e=mr(((r=Q.value.find(h=>h.id===t))==null?void 0:r.config)||""),o=Object.keys(e);if(o.length===0)Rt();else{Tt=!0;try{for(const h of o){const v=e[h];switch(h){case"model":Y.value=v;break;case"temperature":et.value=v;break;case"context":tt.value=v;break}}}finally{Tt=!1}}L.info("Conversation settings have been loaded.")};setTimeout(()=>{let t;[Y,tt,et].forEach(e=>{rt(e,(o,r)=>{Ht&&!Tt&&o!==r&&ct.size===0&&(clearTimeout(t),t=setTimeout(async()=>{try{const{cancel:h=!1}=await Wt();h||L.info("Conversation settings have been saved.")}catch(h){console.error(h),L.warning("Failed to save conversation settings.")}finally{clearTimeout(t)}},typeof e.value=="number"?500:0))})})},1e3);const br=t=>{W.value=W.value.filter(e=>e.id!==t),$fetch("/api/curva/answer",{method:"DELETE",body:{conv:q(),id:t}}).then(()=>L.info("The message has been deleted.")).catch(()=>L.error("An error occurred while deleting the message."))},Ar=()=>{let t=0;const e=`${Z.convert(q(),"64w",10)}.md`,o=W.value.map(r=>{t++;try{return(r.t?`${new Date(r.t.getTime()-(r.dt||0)).toLocaleString()}${r.dt===void 0?"":" (Δt: "+r.dt.toString()+"ms)"}

`:"")+(r.Q?`QUESTION ${t}:

${r.Q.replaceAll(`
`,`

`)}`:"")+(r.Q&&r.A?`

`:"")+(r.A?`ANSWER ${t}:

${r.A}`:"")}catch{return"(Unknown message)"}}).join(`

---

`)+`

---

`;ye(e,o)},Er=()=>{ye(`${Z.convert(q(),"64w",10)}.json`,JSON.stringify(W.value.map(t=>({question:t.Q,answer:t.A,created:new Date(t.t.getTime()).toUTCString(),timeUsed:t.dt||void 0,queries:t.queries||void 0,urls:t.urls||void 0})),null,4))};document.addEventListener("keyup",t=>{switch(t.key){case"/":case"Enter":M();break;case"Escape":N.value=!N.value;break}});const _e=D(!1);document.addEventListener("scroll",()=>{_e.value=!Ae()});function qr(){const t=Lt("appName").value,e=Ee();["temperature-suffix","web-browsing","temperature"].forEach(m=>{e.delete(m,{path:"/"}),e.delete(m)}),Ht=He();const o=()=>{try{Nt(`${ut()||v("chat.title")} - ${t}`)}catch{Nt(`${v("chat.title")} - ${t}`)}},r=async m=>{setTimeout(()=>{ft().isMobileScreen&&(N.value=!1)},0),W.value=[];const x=dt.service({text:v("chat.ldConv")+"...",lock:!0});try{const C=m===null&&Q.value.length>0?null:at(),p=m===null?null:await yr(m);Tr(m),p!==null&&q()===m&&(W.value=p,wr()),await Promise.all([C,X(1e3)])}finally{x.close(),await X(500),M(),ge(),await X(500)}},h=async(m,x=!1)=>{we(m||"");const C=Promise.all([...ct]),p=Bt&&x?new Promise(async i=>{await r(m),jt(),i(null)}):x?new Promise(i=>i(null)):r(m);Bt=!1,ct.add(p);try{await C}catch{}try{await p}finally{ct.delete(p)}},v=ke().t,b=Lt("version"),T=async(m,x)=>{if(document.querySelectorAll(".Message.T").length>0)return L.info("Please wait for the completion of the previous question."),M(),!1;const p=(m!==void 0?m:it.value).trim();if(m===void 0&&(it.value="",p===""))return M(),!1;const i=(x?W.value.filter($=>$.id===x).at(-1):void 0)||Sr(p,"",!1);W.value.includes(i)||W.value.push(i);const _=i.A||"";i.done=!1,i.Q=p,i.A="",i.urls=[],i.queries=[];const n=pe(),f=St()>=document.body.clientHeight,d=q();f&&X().finally(()=>M());const g=await xr(i);jt(),Ut!==d&&at().finally(()=>{Ut=q()});const{id:w,answer:y="",error:A,urls:S=[],queries:E=[],dt:R=0,version:I}=g;i.done=!0,i.t=new Date,i.dt=R||void 0,i.id=w||void 0,i.A=y||"",i.urls=S||[],i.queries=E||[];const O=($=>$?($.type==="warning"?L.warning($.content):L.error($.content),i.A="Oops! Something went wrong!",!0):!1)((()=>{if(y===""){if(A){const $=()=>{x?i.A=_:(W.value.pop(),it.value=p)};if(typeof A=="string"&&A.startsWith("You have tried too many times."))return $(),{type:"warning",content:A};switch(A){case"THINKING":return $(),{type:"warning",content:hr.get(A)};default:return{type:"error",content:A}}}return{type:"error",content:v("error.plzRefresh")}}})());return setTimeout(async()=>{if(!x&&f&&await X(),I&&I!==b.value){const $=setTimeout(()=>location.reload(),3e3);mt.confirm(v("action.newVersion"),v("message.notice"),{confirmButtonText:v("message.ok"),cancelButtonText:v("message.cancel"),type:"warning"}).then(()=>M()).catch(()=>M()).finally(()=>{clearTimeout($),dt.service({text:"Loading...",lock:!0}),location.reload()})}},0),n.then($=>{const F=St()>=document.body.clientHeight;i.more=$,F&&X()}),O};return{showScrollToBottomButton:_e,isEditingMessage:kt,editingMessage:ve,callEditMessageDialog:pr,editingMessageContent:de,focusEditMessageInput:me,model:Y,conversations:Q,messages:W,temperature:et,contextMode:tt,openMenu:N,openSidebarController:It,openDrawerController:$t,inputValue:it,inputMaxLength:_r,currentConvIdComputed:Br,getCurrentConvId:q,getCurrentConvName:ut,checkTokenAndGetConversations:at,loadChat:h,sendMessage:T,deleteMessage:br,regenerateMessage:async m=>{if(W.value.length===0)return;const{Q:x,id:C}=m||W.value.pop();T(x||"",C)},focusInput:M,refreshConversation:()=>{h(q()).finally(()=>M())},renameConversation:(m,x="")=>{m||(m=q(),x=ut()),mt.prompt(v("message.renameConvHint"),v("message.setting"),{confirmButtonText:v("message.ok"),cancelButtonText:v("message.cancel"),inputValue:x,inputPlaceholder:Z.convert(m,"64w",10)}).then(async({value:C})=>{try{await Wt(m,C),L({type:"success",message:v("message.renameSuccess")}),await at(),o()}catch{L({type:"error",message:"Oops! Something went wrong!"})}}).catch(()=>{})},deleteConversation:m=>{const x=m||q();let C="createNewChat";mt.confirm(v("message.deleteConvConfirm"),v("message.warning"),{confirmButtonText:v("message.ok"),cancelButtonText:v("message.cancel"),type:"warning"}).then(async()=>{var n;const p=dt.service({text:v("chat.dltConv")+"...",lock:!0});try{await $fetch("/api/curva/conv",{method:"DELETE",body:{id:x}})}catch{}p.close();const i=q();m===i&&((n=document.getElementById(C))==null||n.click());const _=Q.value.findIndex(f=>f.id===i);_!=-1&&Q.value.splice(_,1)})},resetConvConfig:Rt,exportAsMarkdown:Ar,exportAsJson:Er,clear:Cr}}export{X as a,Z as b,le as r,vt as s,qr as u};
