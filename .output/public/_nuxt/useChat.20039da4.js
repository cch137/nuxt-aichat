var be=Object.defineProperty;var Ae=(t,e,o)=>e in t?be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var ot=(t,e,o)=>(Ae(t,typeof e!="symbol"?e+"":e,o),o);import{ca as At,cb as Ee,cc as He,cd as ke,ce as Re,cf as J,r as D,h as nt,ab as Qt,V as Ie,E as L,i as Nt,cg as $e,D as We,g as Pe,A as ht,ch as Ct,z as gt,l as Vt,ci as qe}from"./entry.88572d02.js";import{E as pt}from"./el-overlay.170f873b.js";import"./el-button.9d18c5bb.js";import"./el-input.25c15878.js";import{u as Ot}from"./useTitle.5cbcd1cb.js";var De=Ee,ze=He,Le=ke,Ne={formats:Le,parse:ze,stringify:De};const Gt=At(Ne);async function X(t=0){return await new Promise((e,o)=>{setTimeout(()=>{try{window.scrollTo({behavior:"smooth",left:0,top:document.body.scrollHeight}),e(null)}catch(r){o(r)}},+t||0)})}const Oe={get isMobileScreen(){return window.innerWidth<600},get isTouchScreen(){return"ontouchstart"in document||navigator.maxTouchPoints>0}};function vt(){return Oe}const mt=t=>{try{if((t==null?void 0:t.toString)===void 0)return`${t}`;{const e=t.toString();return e.startsWith("[object ")&&e.endsWith("]")?JSON.stringify(t):e}}catch{return""}},Me=t=>mt(t).toLowerCase(),Xt="01",Jt="0123456789",Kt="0123456789abcdef",Yt="0123456789abcdefghijklmnopqrstuvwxyz",Zt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Bt=t=>{switch(typeof t!="string"&&(t=Me(t)),t){case"2":return Xt;case"10":return Jt;case"16":return Kt;case"36":return Yt;case"62":return Zt;case"64":return K;case"64w":case"64+":return te;default:return t}},Fe=(t,e,o,r=0)=>{typeof t!="string"&&(t=mt(t));let c=BigInt(0);e=Bt(e);const h=e.length;for(let A=0;A<t.length;A++)c+=BigInt(e.indexOf(t[A])*Math.pow(h,t.length-1-A));let T="";if(o=Bt(o),T===""){const A=BigInt(o.length);for(;c>0;)T=o.charAt(+BigInt(c%A).toString())+T,c=BigInt(c/A)}return(T===""?o.charAt(0):T).padStart(r,o[0])},Ue=t=>{const e=t.split("").map(h=>h.charCodeAt(0)),o=[];let r=0;for(;r<e.length;){const[h,T=0,A=0]=e.slice(r,r+=3),k=(h<<16)+(T<<8)+A,s=k>>18,x=k>>12&63,b=k>>6&63,m=k&63;o.push(K[s],K[x],K[b],K[m])}const c=e.length%3;return o.join("").slice(0,1+o.length-c)+(c===2?"==":c===1?"=":"")},je=/[^A-Za-z0-9+/]/g,ee=t=>t.replace(je,""),yt=t=>String.fromCharCode(+t),Qe=t=>{const e=ee(t).split(""),o=[];let r=0;for(;r<e.length;){const[c,h,T,A]=e.slice(r,r+=4).map(k=>K.indexOf(k));o.push(yt(c<<2|h>>4)),T!==64&&o.push(yt((h&15)<<4|T>>2)),A!==64&&o.push(yt((T&3)<<6|A))}return o.join("").replaceAll("\0","")},Z={BASE2_CHARSET:Xt,BASE10_CHARSET:Jt,BASE16_CHARSET:Kt,BASE36_CHARSET:Yt,BASE62_CHARSET:Zt,BASE64_CHARSET:K,BASE64WEB_CHARSET:te,convert:Fe,getCharset:Bt,secureBase64:ee,textToBase64:Ue,base64ToText:Qe};var re={exports:{}};function Ve(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wt={exports:{}},Mt;function Et(){return Mt||(Mt=1,function(t,e){(function(o,r){t.exports=r()})(J,function(){var o=o||function(r,c){var h;if(typeof window<"u"&&window.crypto&&(h=window.crypto),typeof self<"u"&&self.crypto&&(h=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(h=globalThis.crypto),!h&&typeof window<"u"&&window.msCrypto&&(h=window.msCrypto),!h&&typeof J<"u"&&J.crypto&&(h=J.crypto),!h&&typeof Ve=="function")try{h=Re}catch{}var T=function(){if(h){if(typeof h.getRandomValues=="function")try{return h.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof h.randomBytes=="function")try{return h.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},A=Object.create||function(){function n(){}return function(v){var d;return n.prototype=v,d=new n,n.prototype=null,d}}(),k={},s=k.lib={},x=s.Base=function(){return{extend:function(n){var v=A(this);return n&&v.mixIn(n),(!v.hasOwnProperty("init")||this.init===v.init)&&(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var n=this.extend();return n.init.apply(n,arguments),n},init:function(){},mixIn:function(n){for(var v in n)n.hasOwnProperty(v)&&(this[v]=n[v]);n.hasOwnProperty("toString")&&(this.toString=n.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),b=s.WordArray=x.extend({init:function(n,v){n=this.words=n||[],v!=c?this.sigBytes=v:this.sigBytes=n.length*4},toString:function(n){return(n||S).stringify(this)},concat:function(n){var v=this.words,d=n.words,g=this.sigBytes,w=n.sigBytes;if(this.clamp(),g%4)for(var y=0;y<w;y++){var E=d[y>>>2]>>>24-y%4*8&255;v[g+y>>>2]|=E<<24-(g+y)%4*8}else for(var C=0;C<w;C+=4)v[g+C>>>2]=d[C>>>2];return this.sigBytes+=w,this},clamp:function(){var n=this.words,v=this.sigBytes;n[v>>>2]&=4294967295<<32-v%4*8,n.length=r.ceil(v/4)},clone:function(){var n=x.clone.call(this);return n.words=this.words.slice(0),n},random:function(n){for(var v=[],d=0;d<n;d+=4)v.push(T());return new b.init(v,n)}}),m=k.enc={},S=m.Hex={stringify:function(n){for(var v=n.words,d=n.sigBytes,g=[],w=0;w<d;w++){var y=v[w>>>2]>>>24-w%4*8&255;g.push((y>>>4).toString(16)),g.push((y&15).toString(16))}return g.join("")},parse:function(n){for(var v=n.length,d=[],g=0;g<v;g+=2)d[g>>>3]|=parseInt(n.substr(g,2),16)<<24-g%8*4;return new b.init(d,v/2)}},B=m.Latin1={stringify:function(n){for(var v=n.words,d=n.sigBytes,g=[],w=0;w<d;w++){var y=v[w>>>2]>>>24-w%4*8&255;g.push(String.fromCharCode(y))}return g.join("")},parse:function(n){for(var v=n.length,d=[],g=0;g<v;g++)d[g>>>2]|=(n.charCodeAt(g)&255)<<24-g%4*8;return new b.init(d,v)}},p=m.Utf8={stringify:function(n){try{return decodeURIComponent(escape(B.stringify(n)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(n){return B.parse(unescape(encodeURIComponent(n)))}},i=s.BufferedBlockAlgorithm=x.extend({reset:function(){this._data=new b.init,this._nDataBytes=0},_append:function(n){typeof n=="string"&&(n=p.parse(n)),this._data.concat(n),this._nDataBytes+=n.sigBytes},_process:function(n){var v,d=this._data,g=d.words,w=d.sigBytes,y=this.blockSize,E=y*4,C=w/E;n?C=r.ceil(C):C=r.max((C|0)-this._minBufferSize,0);var H=C*y,R=r.min(H*4,w);if(H){for(var I=0;I<H;I+=y)this._doProcessBlock(g,I);v=g.splice(0,H),d.sigBytes-=R}return new b.init(v,R)},clone:function(){var n=x.clone.call(this);return n._data=this._data.clone(),n},_minBufferSize:0});s.Hasher=i.extend({cfg:x.extend(),init:function(n){this.cfg=this.cfg.extend(n),this.reset()},reset:function(){i.reset.call(this),this._doReset()},update:function(n){return this._append(n),this._process(),this},finalize:function(n){n&&this._append(n);var v=this._doFinalize();return v},blockSize:16,_createHelper:function(n){return function(v,d){return new n.init(d).finalize(v)}},_createHmacHelper:function(n){return function(v,d){return new _.HMAC.init(n,d).finalize(v)}}});var _=k.algo={};return k}(Math);return o})}(wt)),wt.exports}var _t={exports:{}},Ft;function Ge(){return Ft||(Ft=1,function(t,e){(function(o,r){t.exports=r(Et())})(J,function(o){return function(r){var c=o,h=c.lib,T=h.Base,A=h.WordArray,k=c.x64={};k.Word=T.extend({init:function(s,x){this.high=s,this.low=x}}),k.WordArray=T.extend({init:function(s,x){s=this.words=s||[],x!=r?this.sigBytes=x:this.sigBytes=s.length*8},toX32:function(){for(var s=this.words,x=s.length,b=[],m=0;m<x;m++){var S=s[m];b.push(S.high),b.push(S.low)}return A.create(b,this.sigBytes)},clone:function(){for(var s=T.clone.call(this),x=s.words=this.words.slice(0),b=x.length,m=0;m<b;m++)x[m]=x[m].clone();return s}})}(),o})}(_t)),_t.exports}(function(t,e){(function(o,r,c){t.exports=r(Et(),Ge())})(J,function(o){return function(r){var c=o,h=c.lib,T=h.WordArray,A=h.Hasher,k=c.x64,s=k.Word,x=c.algo,b=[],m=[],S=[];(function(){for(var i=1,_=0,n=0;n<24;n++){b[i+5*_]=(n+1)*(n+2)/2%64;var v=_%5,d=(2*i+3*_)%5;i=v,_=d}for(var i=0;i<5;i++)for(var _=0;_<5;_++)m[i+5*_]=_+(2*i+3*_)%5*5;for(var g=1,w=0;w<24;w++){for(var y=0,E=0,C=0;C<7;C++){if(g&1){var H=(1<<C)-1;H<32?E^=1<<H:y^=1<<H-32}g&128?g=g<<1^113:g<<=1}S[w]=s.create(y,E)}})();var B=[];(function(){for(var i=0;i<25;i++)B[i]=s.create()})();var p=x.SHA3=A.extend({cfg:A.cfg.extend({outputLength:512}),_doReset:function(){for(var i=this._state=[],_=0;_<25;_++)i[_]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(i,_){for(var n=this._state,v=this.blockSize/2,d=0;d<v;d++){var g=i[_+2*d],w=i[_+2*d+1];g=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360;var y=n[d];y.high^=w,y.low^=g}for(var E=0;E<24;E++){for(var C=0;C<5;C++){for(var H=0,R=0,I=0;I<5;I++){var y=n[C+5*I];H^=y.high,R^=y.low}var M=B[C];M.high=H,M.low=R}for(var C=0;C<5;C++)for(var $=B[(C+4)%5],F=B[(C+1)%5],V=F.high,G=F.low,H=$.high^(V<<1|G>>>31),R=$.low^(G<<1|V>>>31),I=0;I<5;I++){var y=n[C+5*I];y.high^=H,y.low^=R}for(var z=1;z<25;z++){var H,R,y=n[z],U=y.high,j=y.low,a=b[z];a<32?(H=U<<a|j>>>32-a,R=j<<a|U>>>32-a):(H=j<<a-32|U>>>64-a,R=U<<a-32|j>>>64-a);var u=B[m[z]];u.high=H,u.low=R}var l=B[0],f=n[0];l.high=f.high,l.low=f.low;for(var C=0;C<5;C++)for(var I=0;I<5;I++){var z=C+5*I,y=n[z],qt=B[z],Dt=B[(C+1)%5+5*I],zt=B[(C+2)%5+5*I];y.high=qt.high^~Dt.high&zt.high,y.low=qt.low^~Dt.low&zt.low}var y=n[0],Lt=S[E];y.high^=Lt.high,y.low^=Lt.low}},_doFinalize:function(){var i=this._data,_=i.words;this._nDataBytes*8;var n=i.sigBytes*8,v=this.blockSize*32;_[n>>>5]|=1<<24-n%32,_[(r.ceil((n+1)/v)*v>>>5)-1]|=128,i.sigBytes=_.length*4,this._process();for(var d=this._state,g=this.cfg.outputLength/8,w=g/8,y=[],E=0;E<w;E++){var C=d[E],H=C.high,R=C.low;H=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,y.push(R),y.push(H)}return new T.init(y,g)},clone:function(){for(var i=A.clone.call(this),_=i._state=this._state.slice(0),n=0;n<25;n++)_[n]=_[n].clone();return i}});c.SHA3=A._createHelper(p),c.HmacSHA3=A._createHmacHelper(p)}(Math),o.SHA3})})(re);var Xe=re.exports;const ne=At(Xe);function Je(...t){return t.reduce((e,o)=>e+o,0)}function Ke(t){try{return typeof t[Symbol==null?void 0:Symbol.iterator]=="function"}catch{return!1}}function oe(t){const e=new Set;return JSON.stringify(t,(r,c)=>{if(typeof c=="object"&&c!==null){if(e.has(c))return;e.add(c),Ke(c)&&(c=[...c])}return c})}const Ye=t=>ne(t,{outputLength:256}).toString(),Ze=/0b[0-1]+/i;function rt(t){if(typeof t=="number")return Math.round(t);if(t instanceof Object&&(t=oe(t)),typeof t=="string"){if(Ze.test(t))return parseInt(t.substring(2,t.length-1),2);const e=parseInt(t);return Number.isNaN(e)?e:Je(parseInt(Ye(t),16))}else return Date.now()}const P=624,st=397,tr=2567483615,xt=2147483648,St=2147483647;class er{constructor(e){ot(this,"mt",new Array(P));ot(this,"mti",P+1);ot(this,"seed");return this.seed=e=rt(e),Array.isArray(e)?this.init_by_array(e,e.length):this.init_seed(e),this}init_seed(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<P;this.mti++)e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(((e&4294901760)>>>16)*1812433253<<16)+(e&65535)*1812433253+this.mti,this.mt[this.mti]>>>=0}init_by_array(e,o){let r,c,h;for(this.init_seed(19650218),r=1,c=0,h=P>o?P:o;h!==0;h--){const T=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(((T&4294901760)>>>16)*1664525<<16)+(T&65535)*1664525)+e[c]+c,this.mt[r]>>>=0,r++,c++,r>=P&&(this.mt[0]=this.mt[P-1],r=1),c>=o&&(c=0)}for(h=P-1;h!==0;h--){const T=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(((T&4294901760)>>>16)*1566083941<<16)+(T&65535)*1566083941)-r,this.mt[r]>>>=0,r++,r>=P&&(this.mt[0]=this.mt[P-1],r=1)}this.mt[0]=2147483648}random_int(){let e;const o=new Array(0,tr);if(this.mti>=P){let r;for(this.mti===P+1&&this.init_seed(5489),r=0;r<P-st;r++)e=this.mt[r]&xt|this.mt[r+1]&St,this.mt[r]=this.mt[r+st]^e>>>1^o[e&1];for(;r<P-1;r++)e=this.mt[r]&xt|this.mt[r+1]&St,this.mt[r]=this.mt[r+(st-P)]^e>>>1^o[e&1];e=this.mt[P-1]&xt|this.mt[0]&St,this.mt[P-1]=this.mt[st-1]^e>>>1^o[e&1],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^=e>>>18,e>>>0}random_int31(){return this.random_int()>>>1}random_incl(){return this.random_int()*(1/4294967295)}random(){return this.random_int()*(1/4294967296)}random_excl(){return(this.random_int()+.5)*(1/4294967296)}random_long(){return((this.random_int()>>>5)*67108864+(this.random_int()>>>6))*(1/9007199254740992)}}function se(t){return new er(t)}const{BASE10_CHARSET:rr,BASE16_CHARSET:nr,BASE64WEB_CHARSET:or}=Z,sr=se(),ae=(t=sr)=>t.random(),Ht=(t,e,o)=>((e===void 0||e===0)&&(e=t,t=0),Math.floor(t+ae(o)*e)),ie=(t,e)=>t[Ht(0,t.length,e)],ce=(t,e=1,o)=>{const r=[],c=[];for(let h=0;h<e;h++)c.length===0&&c.push(...t),r.push(c.splice(Ht(0,c.length,o),1)[0]);return r},ar=(t,e)=>ce(t,t.length,e),at=(t,e=8,o)=>new Array(e).fill(0).map(r=>ie(t,o)).join(""),ue={MT:se,toSeed:rt,rand:ae,randInt:Ht,charset:at,choice:ie,choices:ce,shuffle:ar,base10:(t=6,e)=>at(rr,t,e),base16:(t=32,e)=>at(nr,t,e),base64:(t=32,e)=>at(or,t,e),lcg(t){let e=rt(t);return()=>(e=(e*1664525+1013904223)%4294967296)/4294967296}};var le={exports:{}};(function(t,e){(function(o,r){t.exports=r(Et())})(J,function(o){return function(r){var c=o,h=c.lib,T=h.WordArray,A=h.Hasher,k=c.algo,s=[];(function(){for(var p=0;p<64;p++)s[p]=r.abs(r.sin(p+1))*4294967296|0})();var x=k.MD5=A.extend({_doReset:function(){this._hash=new T.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,i){for(var _=0;_<16;_++){var n=i+_,v=p[n];p[n]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360}var d=this._hash.words,g=p[i+0],w=p[i+1],y=p[i+2],E=p[i+3],C=p[i+4],H=p[i+5],R=p[i+6],I=p[i+7],M=p[i+8],$=p[i+9],F=p[i+10],V=p[i+11],G=p[i+12],z=p[i+13],U=p[i+14],j=p[i+15],a=d[0],u=d[1],l=d[2],f=d[3];a=b(a,u,l,f,g,7,s[0]),f=b(f,a,u,l,w,12,s[1]),l=b(l,f,a,u,y,17,s[2]),u=b(u,l,f,a,E,22,s[3]),a=b(a,u,l,f,C,7,s[4]),f=b(f,a,u,l,H,12,s[5]),l=b(l,f,a,u,R,17,s[6]),u=b(u,l,f,a,I,22,s[7]),a=b(a,u,l,f,M,7,s[8]),f=b(f,a,u,l,$,12,s[9]),l=b(l,f,a,u,F,17,s[10]),u=b(u,l,f,a,V,22,s[11]),a=b(a,u,l,f,G,7,s[12]),f=b(f,a,u,l,z,12,s[13]),l=b(l,f,a,u,U,17,s[14]),u=b(u,l,f,a,j,22,s[15]),a=m(a,u,l,f,w,5,s[16]),f=m(f,a,u,l,R,9,s[17]),l=m(l,f,a,u,V,14,s[18]),u=m(u,l,f,a,g,20,s[19]),a=m(a,u,l,f,H,5,s[20]),f=m(f,a,u,l,F,9,s[21]),l=m(l,f,a,u,j,14,s[22]),u=m(u,l,f,a,C,20,s[23]),a=m(a,u,l,f,$,5,s[24]),f=m(f,a,u,l,U,9,s[25]),l=m(l,f,a,u,E,14,s[26]),u=m(u,l,f,a,M,20,s[27]),a=m(a,u,l,f,z,5,s[28]),f=m(f,a,u,l,y,9,s[29]),l=m(l,f,a,u,I,14,s[30]),u=m(u,l,f,a,G,20,s[31]),a=S(a,u,l,f,H,4,s[32]),f=S(f,a,u,l,M,11,s[33]),l=S(l,f,a,u,V,16,s[34]),u=S(u,l,f,a,U,23,s[35]),a=S(a,u,l,f,w,4,s[36]),f=S(f,a,u,l,C,11,s[37]),l=S(l,f,a,u,I,16,s[38]),u=S(u,l,f,a,F,23,s[39]),a=S(a,u,l,f,z,4,s[40]),f=S(f,a,u,l,g,11,s[41]),l=S(l,f,a,u,E,16,s[42]),u=S(u,l,f,a,R,23,s[43]),a=S(a,u,l,f,$,4,s[44]),f=S(f,a,u,l,G,11,s[45]),l=S(l,f,a,u,j,16,s[46]),u=S(u,l,f,a,y,23,s[47]),a=B(a,u,l,f,g,6,s[48]),f=B(f,a,u,l,I,10,s[49]),l=B(l,f,a,u,U,15,s[50]),u=B(u,l,f,a,H,21,s[51]),a=B(a,u,l,f,G,6,s[52]),f=B(f,a,u,l,E,10,s[53]),l=B(l,f,a,u,F,15,s[54]),u=B(u,l,f,a,w,21,s[55]),a=B(a,u,l,f,M,6,s[56]),f=B(f,a,u,l,j,10,s[57]),l=B(l,f,a,u,R,15,s[58]),u=B(u,l,f,a,z,21,s[59]),a=B(a,u,l,f,C,6,s[60]),f=B(f,a,u,l,V,10,s[61]),l=B(l,f,a,u,y,15,s[62]),u=B(u,l,f,a,$,21,s[63]),d[0]=d[0]+a|0,d[1]=d[1]+u|0,d[2]=d[2]+l|0,d[3]=d[3]+f|0},_doFinalize:function(){var p=this._data,i=p.words,_=this._nDataBytes*8,n=p.sigBytes*8;i[n>>>5]|=128<<24-n%32;var v=r.floor(_/4294967296),d=_;i[(n+64>>>9<<4)+15]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,i[(n+64>>>9<<4)+14]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360,p.sigBytes=(i.length+1)*4,this._process();for(var g=this._hash,w=g.words,y=0;y<4;y++){var E=w[y];w[y]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}return g},clone:function(){var p=A.clone.call(this);return p._hash=this._hash.clone(),p}});function b(p,i,_,n,v,d,g){var w=p+(i&_|~i&n)+v+g;return(w<<d|w>>>32-d)+i}function m(p,i,_,n,v,d,g){var w=p+(i&n|_&~n)+v+g;return(w<<d|w>>>32-d)+i}function S(p,i,_,n,v,d,g){var w=p+(i^_^n)+v+g;return(w<<d|w>>>32-d)+i}function B(p,i,_,n,v,d,g){var w=p+(_^(i|~n))+v+g;return(w<<d|w>>>32-d)+i}c.MD5=A._createHelper(x),c.HmacMD5=A._createHmacHelper(x)}(Math),o.MD5})})(le);var ir=le.exports;const cr=At(ir),{MT:dt,shuffle:ur,randInt:ut}=ue,{convert:fe,getCharset:he}=Z,ve=(t,e)=>{const o=ur(t,e);return()=>(o.push(o.shift()),o)},de=(t,e=16,o=1,r)=>{const c=Number.isNaN(+e)?64:+e,h=he(e),T=rt(r!==void 0?r:ut(0,c)),A=dt(T),k=ve(h,dt(ut(0,1e6,A))),s=typeof t=="string"?t.split(""):t,x=[r!==void 0?h[ut(0,c)]:fe(T,10,e),...s.map(b=>k()[h.indexOf(b)])];return--o<1?x.join(""):de(x,e,o,r)},me=(t,e=16,o=1,r)=>{const c=he(e),h=rt(r!==void 0?r:+fe(t[0],e,10)),T=dt(h),A=ve(c,dt(ut(0,1e6,T))),s=(typeof t=="string"?t.split(""):t).slice(1,t.length).map(x=>c[A().indexOf(x)]);return--o<1?s.join(""):me(s,e,o,r)},{textToBase64:lr,base64ToText:fr,secureBase64:hr}=Z;function ge(t,e=1,o){return typeof t=="object"?t=oe(t):typeof t!="string"&&(t=mt(t)),de(hr(lr(t)),64,e,o)}function vr(t,e=1,o,r=!0){if(t=fr(me(t,64,e,o)),!r)return t;try{return JSON.parse(t)}catch{return t}}function dr(t,e=512,o){const r=ge(t,1,o).substring(1);return e==="MD5"?cr(r).toString():ne(r,{outputLength:e}).toString()}const mr={e:ge,d:vr,h:dr},gr=new Map([["THINKING","Please wait, I am answering another question..."]]);function pr(t,e){switch(t){case"model":if(["gpt3","gpt4","gpt-web","claude-2-web","gpt3-fga"].includes(e))return!0;break;case"temperature":if(typeof e=="number"&&e>=0&&e<=1)return!0;break;case"context":if(typeof e=="boolean")return!0;break}return!1}function yr(t){try{return JSON.parse(t)}catch{return t}}function pe(t){try{const e={};for(const o in t){const r=yr(t[o]);pr(o,r)&&(e[o]=r)}return e}catch{return{}}}function wr(t){try{return pe(Gt.parse(t))}catch{return{}}}function _r(t){try{return Gt.stringify(pe(t))}catch{return""}}let kt,Ut="";const ye=D(),Rt=D(!1),we=D(""),Y=D("gpt4"),tt=D(!0),et=D(.5),W=D([]),Q=D([]);nt(Rt,t=>{t||O()});const xr=t=>{Rt.value=!0,ye.value=t,we.value=t.Q,setTimeout(()=>_e(),0)};function _e(){try{document.querySelector(".EditMessageInput textarea").focus()}catch{}}const O=()=>{try{{const t=document.querySelector(".InputBox textarea");t.click(),t.focus()}}catch{}},xe=()=>{try{const t=document.getElementById(q()).parentElement,e=document.querySelector(".ConversationList"),o=t.offsetTop-e.offsetTop-t.clientHeight/2,r=o-e.clientHeight+t.clientHeight*2;e.scrollTop>o&&e.scrollTo({left:0,top:o,behavior:"smooth"}),e.scrollTop<r&&e.scrollTo({left:0,top:r,behavior:"smooth"})}catch{}},it=()=>new Promise((t,e)=>{$fetch("/api/curva/check",{method:"POST"}).then(o=>{Q.value=o,xe(),t(!0)}).catch(o=>{L.error("Initialization Failed"),e(o)})}),Sr=t=>new Promise(async(e,o)=>{if(t==null)return e([]);const r=await $fetch("/api/curva/history",{method:"POST",body:{id:t}});(!r||r.length===0)&&ht("/c/");try{e(r.map(c=>Vt({...c,t:new Date(c.t),done:!!c.A})))}catch{ht("/c/"),e([])}}),Se=async function(t){return[]},Cr=async()=>{try{const t=W.value.at(-1),e=await Se(t.Q),o=Ct()>=document.body.clientHeight;t.more=e,o&&X()}catch(t){console.error(t)}},It=(t=!1)=>{Y.value="gpt4",tt.value=!0,et.value=.5,t&&L.success("Conversation settings have been reset.")};It();const N=D(!1),$t=D(N.value),Wt=D(N.value);nt($t,t=>{N.value=t});nt(Wt,t=>{N.value=t});nt(N,t=>{const{isMobileScreen:e}=vt();$t.value=e?!1:t,Wt.value=e?t:!1,setTimeout(()=>O(),0)});{let t,e=vt().isMobileScreen?"drawer":"sidebar";window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>{const o=vt().isMobileScreen?"drawer":"sidebar";N.value&&o!=e&&(N.value=!1,setTimeout(()=>{N.value=!0},0),e=o)},100)})}const ct=D(""),Br=Qt(()=>Y.value.startsWith("gpt3")?16e3:32e3),Tr=(()=>{const{h:t}=mr,e=()=>[77,68,53].map(c=>String.fromCharCode(c)).join(""),o=(c,h)=>({hash:t(c,e(),h),timestamp:mt(h)}),r=(c,h,T,A,k,s)=>{let x=q();return x||(x=ue.base64(8),Q.value.unshift({id:x,name:"",mtime:Date.now(),config:""}),ht(`/c/${x}?feature=new`),Be(x)),{conv:x,messages:c,model:h,temperature:T,t:A,tz:k,id:s}};return async c=>{const h=new Date,T=h.getTime(),A=h.getTimezoneOffset()/60*-1,k=(()=>{if(!tt.value)return[{role:"user",content:(c==null?void 0:c.Q)||""}];const s=W.value.lastIndexOf(c)+1||W.value.length;let x=W.value.slice(0,s);return x=x.slice(x.length-100),x.map(b=>[{role:"user",content:b.Q},{role:"assistant",content:b.A}].filter(m=>m.content)).flat()})();try{const s=r(k,Y.value,et.value,T,A,c==null?void 0:c.id),x=o(k,T);return await $fetch("/api/curva/answer",{method:"POST",headers:x,body:s})}catch{return{answer:"",error:"Error while sending request."}}}})(),br=(t="",e="",o=!1)=>Vt({done:o,Q:t,A:e,queries:[],urls:[],dt:void 0,t:new Date}),lt=new Set,Ar=()=>{Q.value=[],W.value=[],ht("/c/"),Tt=!0};let Tt=!0;function jt(){{const t=qe();t.get("feature")==="new"&&(t.delete("feature"),t.save(),Pt())}}const Ce=(t,e)=>{const o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),o.setAttribute("download",t),o.style.display="none",document.body.appendChild(o),o.click(),o.remove()},[Er,q,Be]=(()=>{const t=D("");return[Qt(()=>t.value),()=>t.value,e=>{var o,r;return t.value=e===void 0?(r=(o=kt._route)==null?void 0:o.params)==null?void 0:r.conv:e}]})(),ft=()=>{var e;const t=q();return((e=Q.value.filter(o=>o.id===t)[0])==null?void 0:e.name)||""};async function Pt(t,e){return t=t||q(),t?await $fetch("/api/curva/conv",{method:"PUT",body:{id:t,name:e||ft(),config:_r({model:Y.value,temperature:et.value,context:tt.value})}}):{cancel:!0}}let bt=!1;const Hr=t=>{var r;if(t===void 0&&(t=q()),t==null)return;const e=wr(((r=Q.value.find(c=>c.id===t))==null?void 0:r.config)||""),o=Object.keys(e);if(o.length===0)It();else{bt=!0;try{for(const c of o){const h=e[c];switch(c){case"model":Y.value=h;break;case"temperature":et.value=h;break;case"context":tt.value=h;break}}}finally{bt=!1}}L.info("Conversation settings have been loaded.")};setTimeout(()=>{let t;[Y,tt,et].forEach(e=>{nt(e,(o,r)=>{kt&&!bt&&o!==r&&lt.size===0&&(clearTimeout(t),t=setTimeout(async()=>{try{const{cancel:c=!1}=await Pt();c||L.info("Conversation settings have been saved.")}catch(c){console.error(c),L.warning("Failed to save conversation settings.")}finally{clearTimeout(t)}},typeof e.value=="number"?500:0))})})},1e3);const kr=t=>{W.value=W.value.filter(e=>e.id!==t),$fetch("/api/curva/answer",{method:"DELETE",body:{conv:q(),id:t}}).then(()=>L.info("The message has been deleted.")).catch(()=>L.error("An error occurred while deleting the message."))},Rr=()=>{let t=0;const e=`${Z.convert(q(),"64w",10)}.md`,o=W.value.map(r=>{t++;try{return(r.t?`${new Date(r.t.getTime()-(r.dt||0)).toLocaleString()}${r.dt===void 0?"":" (Δt: "+r.dt.toString()+"ms)"}

`:"")+(r.Q?`QUESTION ${t}:

${r.Q.replaceAll(`
`,`

`)}`:"")+(r.Q&&r.A?`

`:"")+(r.A?`ANSWER ${t}:

${r.A}`:"")}catch{return"(Unknown message)"}}).join(`

---

`)+`

---

`;Ce(e,o)},Ir=()=>{Ce(`${Z.convert(q(),"64w",10)}.json`,JSON.stringify(W.value.map(t=>({question:t.Q,answer:t.A,created:new Date(t.t.getTime()).toUTCString(),timeUsed:t.dt||void 0,queries:t.queries||void 0,urls:t.urls||void 0})),null,4))};document.addEventListener("keyup",t=>{switch(t.key){case"/":case"Enter":O();break;case"Escape":N.value=!N.value;break}});const Te=D(!1);document.addEventListener("scroll",()=>{Te.value=!Ie()});function Lr(){const t=Nt("appName").value,e=$e();["temperature-suffix","web-browsing","temperature"].forEach(m=>{e.delete(m,{path:"/"}),e.delete(m)}),kt=We();const o=()=>{try{Ot(`${ft()||h("chat.title")} - ${t}`)}catch{Ot(`${h("chat.title")} - ${t}`)}},r=async m=>{setTimeout(()=>{vt().isMobileScreen&&(N.value=!1)},0),W.value=[];const S=gt.service({text:h("chat.ldConv")+"...",lock:!0});try{const B=m===null&&Q.value.length>0?null:it(),p=m===null?null:await Sr(m);Hr(m),p!==null&&q()===m&&(W.value=p,Cr()),await Promise.all([B,X(1e3)])}finally{S.close(),await X(500),O(),xe(),await X(500)}},c=async(m,S=!1)=>{Be(m||"");const B=Promise.all([...lt]),p=Tt&&S?new Promise(async i=>{await r(m),jt(),i(null)}):S?new Promise(i=>i(null)):r(m);Tt=!1,lt.add(p);try{await B}catch{}try{await p}finally{lt.delete(p)}},h=Pe().t,T=Nt("version"),A=async(m,S)=>{if(document.querySelectorAll(".Message.T").length>0)return L.info("Please wait for the completion of the previous question."),O(),!1;const p=(m!==void 0?m:ct.value).trim();if(m===void 0&&(ct.value="",p===""))return O(),!1;const i=(S?W.value.filter($=>$.id===S).at(-1):void 0)||br(p,"",!1);W.value.includes(i)||W.value.push(i);const _=i.A||"";i.done=!1,i.Q=p,i.A="",i.urls=[],i.queries=[];const n=Se(),v=Ct()>=document.body.clientHeight,d=q();v&&X().finally(()=>O());const g=await Tr(i);jt(),Ut!==d&&it().finally(()=>{Ut=q()});const{id:w,answer:y="",error:E,urls:C=[],queries:H=[],dt:R=0,version:I}=g;i.done=!0,i.t=new Date,i.dt=R||void 0,i.id=w||void 0,i.A=y||"",i.urls=C||[],i.queries=H||[];const M=($=>$?($.type==="warning"?L.warning($.content):L.error($.content),i.A="Oops! Something went wrong!",!0):!1)((()=>{if(y===""){if(E){const $=()=>{S?i.A=_:(W.value.pop(),ct.value=p)};if(typeof E=="string"&&E.startsWith("You have tried too many times."))return $(),{type:"warning",content:E};switch(E){case"THINKING":return $(),{type:"warning",content:gr.get(E)};default:return{type:"error",content:E}}}return{type:"error",content:h("error.plzRefresh")}}})());return setTimeout(async()=>{!S&&v&&await X(),I&&I!==T.value&&pt.confirm(h("action.newVersion"),h("message.notice"),{confirmButtonText:h("message.ok"),cancelButtonText:h("message.cancel"),type:"warning"}).then(()=>{const $=gt.service({text:"Loading...",lock:!0});location.reload(),setTimeout(()=>$.close(),3e3)}).catch(()=>O())},0),n.then($=>{const F=Ct()>=document.body.clientHeight;i.more=$,F&&X()}),M};return{showScrollToBottomButton:Te,isEditingMessage:Rt,editingMessage:ye,callEditMessageDialog:xr,editingMessageContent:we,focusEditMessageInput:_e,model:Y,conversations:Q,messages:W,temperature:et,contextMode:tt,openMenu:N,openSidebarController:$t,openDrawerController:Wt,inputValue:ct,inputMaxLength:Br,currentConvIdComputed:Er,getCurrentConvId:q,getCurrentConvName:ft,checkTokenAndGetConversations:it,loadChat:c,sendMessage:A,deleteMessage:kr,regenerateMessage:async m=>{if(W.value.length===0)return;const{Q:S,id:B}=m||W.value.pop();A(S||"",B)},focusInput:O,refreshConversation:()=>{c(q()).finally(()=>O())},renameConversation:(m,S="")=>{m||(m=q(),S=ft()),pt.prompt(h("message.renameConvHint"),h("message.setting"),{confirmButtonText:h("message.ok"),cancelButtonText:h("message.cancel"),inputValue:S,inputPlaceholder:Z.convert(m,"64w",10)}).then(async({value:B})=>{try{await Pt(m,B),L({type:"success",message:h("message.renameSuccess")}),await it(),o()}catch{L({type:"error",message:"Oops! Something went wrong!"})}}).catch(()=>{})},deleteConversation:m=>{const S=m||q();let B="createNewChat";pt.confirm(h("message.deleteConvConfirm"),h("message.warning"),{confirmButtonText:h("message.ok"),cancelButtonText:h("message.cancel"),type:"warning"}).then(async()=>{var n;const p=gt.service({text:h("chat.dltConv")+"...",lock:!0});try{await $fetch("/api/curva/conv",{method:"DELETE",body:{id:S}})}catch{}p.close();const i=q();m===i&&((n=document.getElementById(B))==null||n.click());const _=Q.value.findIndex(v=>v.id===i);_!=-1&&Q.value.splice(_,1)})},resetConvConfig:It,exportAsMarkdown:Rr,exportAsJson:Ir,clear:Ar}}export{X as a,Z as b,ue as r,mt as s,Lr as u};
