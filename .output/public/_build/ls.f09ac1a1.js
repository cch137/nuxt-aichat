import{a as V,E as q}from"./el-select.fab80331.js";import{E as F}from"./el-link.7d91bf95.js";import{_ as N}from"./client-only.edaa2a69.js";import{f as P,r as _,ac as O,aR as C,h as R,c,b as k,w as m,aS as A,o as n,a as i,i as p,j as I,F as g,B as b,l as $,t as E,d as L,E as K,K as U,_ as D}from"./entry.7ff9c0b1.js";import"./el-input.23271487.js";import"./el-popper.43604054.js";import{u as H}from"./useTitle.c2257164.js";import"./index.2b0e0968.js";import"./scroll.567b8a9a.js";import"./isEqual.7819a49c.js";import"./_Uint8Array.20447739.js";import"./focus-trap.18047f53.js";import"./vue.f36acd1f.72fa94a4.js";const M={class:"mt-8 flex-col gap-4 flex-center"},Q={class:"px-4 w-full max-w-prose flex flex-col gap-4 justify-center"},W={class:"pb-16"},Y={class:"chapter-title"},z={class:"flex flex-wrap gap-2 pl-4 pt-2 pb-4"},G={class:"flex-center pb-16"},J="https://api.cch137.link",X=P({__name:"ls",setup(Z){const o=_(""),x=O(()=>(o.value.split(" ").at(-1)||"").split(".json")[0]),d=_([]),u=_([]);function B(){history.length>1?history.back():K.info(U.choice(["Oh~dear, you shouldn't click this.","Back? Where do you want to go?","I don't want you to go anywhere else.","Stay here!","You are lost."]))}const h=_(!1);function y(s=""){const e=C();s?e.set("q",s):e.delete("q"),e.save()}function S(){o.value="",u.value=[],y()}async function w(){h.value=!0;const s=[];u.value=[];const e=A(),r=o.value;y(x.value);const v=await(await fetch(`https://api.cch137.link/ls/${r}`)).json();function f(l){for(const a of s)if(a.chapter===l)return a.problems;const t=[];return s.push({chapter:l,problems:t}),t}for(const l of v){const[t,a,T]=l.isbn_c_p.split("_");f(a).push({p:T,link:l.link})}u.value=s,e.close(),h.value=!1}(async()=>{const s=C().get("q")||"",e=fetch("https://api.cch137.link/ls/list");if(d.value=await(await e).json(),s&&!o.value){for(const r of d.value)if(r.toLowerCase().includes(s.toLowerCase())){o.value=r,await w();break}}})();const j=R("appName");return H(`LS - ${j.value}`),(s,e)=>{const r=V,v=q,f=F,l=N;return n(),c("div",M,[k(l,null,{default:m(()=>[i("h1",{class:"m-0 cursor-pointer",onClick:e[0]||(e[0]=t=>S())},"LS"),i("div",Q,[k(v,{modelValue:p(o),"onUpdate:modelValue":e[1]||(e[1]=t=>I(o)?o.value=t:null),onChange:e[2]||(e[2]=t=>w()),placeholder:"請選擇原文書",loading:p(h)},{default:m(()=>[(n(!0),c(g,null,b(p(d),t=>(n(),$(r,{key:t,label:t.replaceAll(".json",""),value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),i("div",W,[(n(!0),c(g,null,b(p(u),t=>(n(),c("details",null,[i("summary",Y,E(t.chapter),1),i("div",z,[(n(!0),c(g,null,b(t.problems,a=>(n(),$(f,{href:`${J}/ls/i/${t.chapter}_${a.p}?id=${a.link.split("/").at(-1)}&b=${p(x)}`,target:"_blank"},{default:m(()=>[L(E(a.p),1)]),_:2},1032,["href"]))),256))])]))),256))]),i("div",G,[k(f,{onClick:e[3]||(e[3]=t=>B())},{default:m(()=>[L("BACK")]),_:1})])])]),_:1})])}}});const _e=D(X,[["__scopeId","data-v-fa5ffea5"]]);export{_e as default};
