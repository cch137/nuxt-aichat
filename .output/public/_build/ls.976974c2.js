import{a as V,E as $}from"./el-select.d9c1e811.js";import{E as q}from"./el-link.3b7d2354.js";import{_ as F}from"./client-only.99cb52e6.js";import{f as N,r as _,aR as w,h as P,c,b,w as f,aS as O,o as r,a as i,i as m,j as R,F as k,B as g,l as C,t as E,d as L,E as A,K as I,_ as K}from"./entry.b03f7249.js";import"./el-input.336a6384.js";import"./el-popper.bf3c99f0.js";import{u as U}from"./useTitle.e65efba1.js";import"./index.b66f44e2.js";import"./scroll.8648e287.js";import"./isEqual.27b99326.js";import"./_Uint8Array.c8ebd2e3.js";import"./focus-trap.e8d6483a.js";import"./vue.f36acd1f.fc52971d.js";const D={class:"mt-8 flex-col gap-4 flex-center"},M={class:"px-4 w-full max-w-prose flex flex-col gap-4 justify-center"},Q={class:"pb-16"},W={class:"chapter-title"},Y={class:"flex flex-wrap gap-2 pl-4 pt-2 pb-4"},z={class:"flex-center pb-16"},G=N({__name:"ls",setup(H){const o=_(""),d=_([]),p=_([]);function B(){history.length>1?history.back():A.info(I.choice(["Oh~dear, you shouldn't click this.","Back? Where do you want to go?","I don't want you to go anywhere else.","Stay here!","You are lost."]))}const h=_(!1);function x(s=""){const e=w();s?e.set("q",s):e.delete("q"),e.save()}function S(){o.value="",p.value=[],x()}async function y(){h.value=!0;const s=[];p.value=[];const e=O(),l=o.value;x(l.split(".json")[0]);const v=await(await fetch(`https://api.cch137.link/ls/${l}`)).json();function u(a){for(const n of s)if(n.chapter===a)return n.problems;const t=[];return s.push({chapter:a,problems:t}),t}for(const a of v){const[t,n,T]=a.isbn_c_p.split("_");u(n).push({p:T,link:a.link})}p.value=s,e.close(),h.value=!1}(async()=>{const s=w().get("q")||"",e=fetch("https://api.cch137.link/ls/list");if(d.value=await(await e).json(),s&&!o.value){for(const l of d.value)if(l.toLowerCase().includes(s.toLowerCase())){o.value=l,await y();break}}})();const j=P("appName");return U(`LS - ${j.value}`),(s,e)=>{const l=V,v=$,u=q,a=F;return r(),c("div",D,[b(a,null,{default:f(()=>[i("h1",{class:"m-0 cursor-pointer",onClick:e[0]||(e[0]=t=>S())},"LS"),i("div",M,[b(v,{modelValue:m(o),"onUpdate:modelValue":e[1]||(e[1]=t=>R(o)?o.value=t:null),onChange:e[2]||(e[2]=t=>y()),placeholder:"請選擇原文書",loading:m(h)},{default:f(()=>[(r(!0),c(k,null,g(m(d),t=>(r(),C(l,{key:t,label:t.replaceAll(".json",""),value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),i("div",Q,[(r(!0),c(k,null,g(m(p),t=>(r(),c("details",null,[i("summary",W,E(t.chapter),1),i("div",Y,[(r(!0),c(k,null,g(t.problems,n=>(r(),C(u,{href:`https://api.cch137.link/ls/i/${n.link.split("/").at(-1)}`,target:"_blank"},{default:f(()=>[L(E(n.p),1)]),_:2},1032,["href"]))),256))])]))),256))]),i("div",z,[b(u,{onClick:e[3]||(e[3]=t=>B())},{default:f(()=>[L("BACK")]),_:1})])])]),_:1})])}}});const pe=K(G,[["__scopeId","data-v-bd25bb8e"]]);export{pe as default};
