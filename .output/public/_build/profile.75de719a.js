import{E as C}from"./el-input.d87563b5.js";import{E as k}from"./el-button.7a9f65de.js";import{_ as x}from"./nuxt-link.e28fe783.js";import{_ as N}from"./CommonSettings.b7e6e91b.js";import{f as U,u as S,r as c,g as B,h as I,c as L,a as o,t as s,b as n,i as l,j as v,w as h,o as P,d as g,E as y}from"./entry.337d13a0.js";import{u as T}from"./useAuth.5ec6db09.js";import{u as j}from"./useTitle.63034ec4.js";import"./use-form-item.2ef56732.js";import"./index.fb7bb0f1.js";import"./el-text.e1912579.js";import"./el-select.387a7241.js";import"./el-popper.074379b3.js";import"./focus-trap.adc928d3.js";import"./scroll.6e946eee.js";import"./isEqual.fd58de0d.js";import"./_Uint8Array.bc5fc3da.js";import"./client-only.835fbdc1.js";import"./el-switch.ed54fdf2.js";import"./vue.f36acd1f.c0857e96.js";const A={class:"flex-col w-full max-w-prose p-4 m-auto",style:{height:"calc(100vh - 56px)"}},D={class:"flex gap-2"},M=o("h3",null,"Permission Level",-1),ie=U({__name:"profile",setup(R){const w=S().t,{email:u,username:m,authlvl:p,changeUsername:V}=T(),r=c(!1),d=c(!1),i=c(m.value),$=async()=>{d.value=!0;try{const e=await V(i.value);r.value=!e,e&&(i.value=m.value)}finally{d.value=!1}};return B(i,e=>{r.value=e!==m.value}),j(`${w("auth.profile")} - ${I("appName").value}`),(e,t)=>{const f=C,_=k,E=x,b=N;return P(),L("div",A,[o("h1",null,s(e.$t("auth.title")),1),o("h3",null,s(e.$t("auth.username")),1),o("div",D,[n(f,{modelValue:l(i),"onUpdate:modelValue":t[0]||(t[0]=a=>v(i)?i.value=a:null),type:"text",formatter:a=>a.replace(/[^\w]+/g,""),parser:a=>a.replace(/[^\w]+/g,"")},null,8,["modelValue","formatter","parser"]),n(_,{type:l(r)?"primary":"",disabled:!l(r),loading:l(d),onClick:t[1]||(t[1]=a=>$())},{default:h(()=>[g(s(e.$t("action.save")),1)]),_:1},8,["type","disabled","loading"])]),o("h3",null,s(e.$t("auth.passwd")),1),n(E,{href:"/acc/reset-password"},{default:h(()=>[n(_,null,{default:h(()=>[g(s(e.$t("auth.resetPw")),1)]),_:1})]),_:1}),o("h3",null,s(e.$t("auth.email")),1),o("div",{class:"opacity-60",onClick:t[3]||(t[3]=()=>l(y).info("Email address cannot be changed."))},[n(f,{modelValue:l(u),"onUpdate:modelValue":t[2]||(t[2]=a=>v(u)?u.value=a:null),type:"email",disabled:"",class:"pointer-events-none"},null,8,["modelValue"])]),M,o("div",{class:"opacity-60",onClick:t[5]||(t[5]=()=>l(y).info("Please contact the administrator to change the permission level."))},[n(f,{modelValue:l(p),"onUpdate:modelValue":t[4]||(t[4]=a=>v(p)?p.value=a:null),type:"text",disabled:"",class:"pointer-events-none"},null,8,["modelValue"])]),o("h1",null,s(e.$t("settings.appearance")),1),n(b)])}}});export{ie as default};
