import{E as C}from"./el-input.46ba789e.js";import{E as k}from"./el-button.ce73438c.js";import{_ as x}from"./nuxt-link.7fbcba00.js";import{_ as N}from"./CommonSettings.a1f51e23.js";import{f as U,u as S,r as c,g as B,h as I,c as L,a as l,t as s,b as n,i as o,j as v,w as h,o as P,d as g,E as y}from"./entry.9ba5094b.js";import{u as T}from"./useAuth.facee132.js";import{u as j}from"./useTitle.df227dd5.js";import"./index.da2b8b50.js";import"./el-text.648e6723.js";import"./el-select.13fb7604.js";import"./el-popper.e67d7b0b.js";import"./focus-trap.b4825f87.js";import"./scroll.d1f45fc0.js";import"./isEqual.809fb3f0.js";import"./_Uint8Array.2a5c6b77.js";import"./client-only.536cf011.js";import"./el-switch.6f65b632.js";import"./vue.f36acd1f.6ac7582a.js";const A={class:"flex-col w-full max-w-prose p-4 m-auto",style:{height:"calc(100vh - 56px)"}},D={class:"flex gap-2"},M=l("h3",null,"Permission Level",-1),ne=U({__name:"profile",setup(R){const w=S().t,{email:u,username:m,authlvl:p,changeUsername:V}=T(),r=c(!1),d=c(!1),i=c(m.value),$=async()=>{d.value=!0;try{const e=await V(i.value);r.value=!e,e&&(i.value=m.value)}finally{d.value=!1}};return B(i,e=>{r.value=e!==m.value}),j(`${w("auth.profile")} - ${I("appName").value}`),(e,t)=>{const f=C,_=k,E=x,b=N;return P(),L("div",A,[l("h1",null,s(e.$t("auth.title")),1),l("h3",null,s(e.$t("auth.username")),1),l("div",D,[n(f,{modelValue:o(i),"onUpdate:modelValue":t[0]||(t[0]=a=>v(i)?i.value=a:null),type:"text",formatter:a=>a.replace(/[^\w]+/g,""),parser:a=>a.replace(/[^\w]+/g,"")},null,8,["modelValue","formatter","parser"]),n(_,{type:o(r)?"primary":"",disabled:!o(r),loading:o(d),onClick:t[1]||(t[1]=a=>$())},{default:h(()=>[g(s(e.$t("action.save")),1)]),_:1},8,["type","disabled","loading"])]),l("h3",null,s(e.$t("auth.passwd")),1),n(E,{href:"/acc/reset-password"},{default:h(()=>[n(_,null,{default:h(()=>[g(s(e.$t("auth.resetPw")),1)]),_:1})]),_:1}),l("h3",null,s(e.$t("auth.email")),1),l("div",{class:"opacity-60",onClick:t[3]||(t[3]=()=>o(y).info("Email address cannot be changed."))},[n(f,{modelValue:o(u),"onUpdate:modelValue":t[2]||(t[2]=a=>v(u)?u.value=a:null),type:"email",disabled:"",class:"pointer-events-none"},null,8,["modelValue"])]),M,l("div",{class:"opacity-60",onClick:t[5]||(t[5]=()=>o(y).info("Please contact the administrator to change the permission level."))},[n(f,{modelValue:o(p),"onUpdate:modelValue":t[4]||(t[4]=a=>v(p)?p.value=a:null),type:"text",disabled:"",class:"pointer-events-none"},null,8,["modelValue"])]),l("h1",null,s(e.$t("settings.appearance")),1),n(b)])}}});export{ne as default};
